(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(t){if(t.ep)return;t.ep=!0;const o=n(t);fetch(t.href,o)}})();function Ln(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var ue={},Ae,dt;function Tn(){return dt||(dt=1,Ae=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),Ae}var ke={},ee={},ut;function oe(){if(ut)return ee;ut=1;let s;const e=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return ee.getSymbolSize=function(r){if(!r)throw new Error('"version" cannot be null or undefined');if(r<1||r>40)throw new Error('"version" should be in range from 1 to 40');return r*4+17},ee.getSymbolTotalCodewords=function(r){return e[r]},ee.getBCHDigit=function(n){let r=0;for(;n!==0;)r++,n>>>=1;return r},ee.setToSJISFunction=function(r){if(typeof r!="function")throw new Error('"toSJISFunc" is not a valid function.');s=r},ee.isKanjiModeEnabled=function(){return typeof s<"u"},ee.toSJIS=function(r){return s(r)},ee}var Ne={},ft;function nt(){return ft||(ft=1,function(s){s.L={bit:1},s.M={bit:0},s.Q={bit:3},s.H={bit:2};function e(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return s.L;case"m":case"medium":return s.M;case"q":case"quartile":return s.Q;case"h":case"high":return s.H;default:throw new Error("Unknown EC Level: "+n)}}s.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},s.from=function(r,t){if(s.isValid(r))return r;try{return e(r)}catch{return t}}}(Ne)),Ne}var Fe,ht;function bn(){if(ht)return Fe;ht=1;function s(){this.buffer=[],this.length=0}return s.prototype={get:function(e){const n=Math.floor(e/8);return(this.buffer[n]>>>7-e%8&1)===1},put:function(e,n){for(let r=0;r<n;r++)this.putBit((e>>>n-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const n=Math.floor(this.length/8);this.buffer.length<=n&&this.buffer.push(0),e&&(this.buffer[n]|=128>>>this.length%8),this.length++}},Fe=s,Fe}var $e,mt;function Rn(){if(mt)return $e;mt=1;function s(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}return s.prototype.set=function(e,n,r,t){const o=e*this.size+n;this.data[o]=r,t&&(this.reservedBit[o]=!0)},s.prototype.get=function(e,n){return this.data[e*this.size+n]},s.prototype.xor=function(e,n,r){this.data[e*this.size+n]^=r},s.prototype.isReserved=function(e,n){return this.reservedBit[e*this.size+n]},$e=s,$e}var Oe={},gt;function _n(){return gt||(gt=1,function(s){const e=oe().getSymbolSize;s.getRowColCoords=function(r){if(r===1)return[];const t=Math.floor(r/7)+2,o=e(r),a=o===145?26:Math.ceil((o-13)/(2*t-2))*2,c=[o-7];for(let l=1;l<t-1;l++)c[l]=c[l-1]-a;return c.push(6),c.reverse()},s.getPositions=function(r){const t=[],o=s.getRowColCoords(r),a=o.length;for(let c=0;c<a;c++)for(let l=0;l<a;l++)c===0&&l===0||c===0&&l===a-1||c===a-1&&l===0||t.push([o[c],o[l]]);return t}}(Oe)),Oe}var Ue={},yt;function Mn(){if(yt)return Ue;yt=1;const s=oe().getSymbolSize,e=7;return Ue.getPositions=function(r){const t=s(r);return[[0,0],[t-e,0],[0,t-e]]},Ue}var qe={},pt;function Pn(){return pt||(pt=1,function(s){s.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};s.isValid=function(t){return t!=null&&t!==""&&!isNaN(t)&&t>=0&&t<=7},s.from=function(t){return s.isValid(t)?parseInt(t,10):void 0},s.getPenaltyN1=function(t){const o=t.size;let a=0,c=0,l=0,h=null,g=null;for(let w=0;w<o;w++){c=l=0,h=g=null;for(let f=0;f<o;f++){let y=t.get(w,f);y===h?c++:(c>=5&&(a+=e.N1+(c-5)),h=y,c=1),y=t.get(f,w),y===g?l++:(l>=5&&(a+=e.N1+(l-5)),g=y,l=1)}c>=5&&(a+=e.N1+(c-5)),l>=5&&(a+=e.N1+(l-5))}return a},s.getPenaltyN2=function(t){const o=t.size;let a=0;for(let c=0;c<o-1;c++)for(let l=0;l<o-1;l++){const h=t.get(c,l)+t.get(c,l+1)+t.get(c+1,l)+t.get(c+1,l+1);(h===4||h===0)&&a++}return a*e.N2},s.getPenaltyN3=function(t){const o=t.size;let a=0,c=0,l=0;for(let h=0;h<o;h++){c=l=0;for(let g=0;g<o;g++)c=c<<1&2047|t.get(h,g),g>=10&&(c===1488||c===93)&&a++,l=l<<1&2047|t.get(g,h),g>=10&&(l===1488||l===93)&&a++}return a*e.N3},s.getPenaltyN4=function(t){let o=0;const a=t.data.length;for(let l=0;l<a;l++)o+=t.data[l];return Math.abs(Math.ceil(o*100/a/5)-10)*e.N4};function n(r,t,o){switch(r){case s.Patterns.PATTERN000:return(t+o)%2===0;case s.Patterns.PATTERN001:return t%2===0;case s.Patterns.PATTERN010:return o%3===0;case s.Patterns.PATTERN011:return(t+o)%3===0;case s.Patterns.PATTERN100:return(Math.floor(t/2)+Math.floor(o/3))%2===0;case s.Patterns.PATTERN101:return t*o%2+t*o%3===0;case s.Patterns.PATTERN110:return(t*o%2+t*o%3)%2===0;case s.Patterns.PATTERN111:return(t*o%3+(t+o)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}s.applyMask=function(t,o){const a=o.size;for(let c=0;c<a;c++)for(let l=0;l<a;l++)o.isReserved(l,c)||o.xor(l,c,n(t,l,c))},s.getBestMask=function(t,o){const a=Object.keys(s.Patterns).length;let c=0,l=1/0;for(let h=0;h<a;h++){o(h),s.applyMask(h,t);const g=s.getPenaltyN1(t)+s.getPenaltyN2(t)+s.getPenaltyN3(t)+s.getPenaltyN4(t);s.applyMask(h,t),g<l&&(l=g,c=h)}return c}}(qe)),qe}var Be={},vt;function Ut(){if(vt)return Be;vt=1;const s=nt(),e=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],n=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return Be.getBlocksCount=function(t,o){switch(o){case s.L:return e[(t-1)*4+0];case s.M:return e[(t-1)*4+1];case s.Q:return e[(t-1)*4+2];case s.H:return e[(t-1)*4+3];default:return}},Be.getTotalCodewordsCount=function(t,o){switch(o){case s.L:return n[(t-1)*4+0];case s.M:return n[(t-1)*4+1];case s.Q:return n[(t-1)*4+2];case s.H:return n[(t-1)*4+3];default:return}},Be}var xe={},ye={},wt;function Dn(){if(wt)return ye;wt=1;const s=new Uint8Array(512),e=new Uint8Array(256);return function(){let r=1;for(let t=0;t<255;t++)s[t]=r,e[r]=t,r<<=1,r&256&&(r^=285);for(let t=255;t<512;t++)s[t]=s[t-255]}(),ye.log=function(r){if(r<1)throw new Error("log("+r+")");return e[r]},ye.exp=function(r){return s[r]},ye.mul=function(r,t){return r===0||t===0?0:s[e[r]+e[t]]},ye}var Et;function An(){return Et||(Et=1,function(s){const e=Dn();s.mul=function(r,t){const o=new Uint8Array(r.length+t.length-1);for(let a=0;a<r.length;a++)for(let c=0;c<t.length;c++)o[a+c]^=e.mul(r[a],t[c]);return o},s.mod=function(r,t){let o=new Uint8Array(r);for(;o.length-t.length>=0;){const a=o[0];for(let l=0;l<t.length;l++)o[l]^=e.mul(t[l],a);let c=0;for(;c<o.length&&o[c]===0;)c++;o=o.slice(c)}return o},s.generateECPolynomial=function(r){let t=new Uint8Array([1]);for(let o=0;o<r;o++)t=s.mul(t,new Uint8Array([1,e.exp(o)]));return t}}(xe)),xe}var He,Ct;function kn(){if(Ct)return He;Ct=1;const s=An();function e(n){this.genPoly=void 0,this.degree=n,this.degree&&this.initialize(this.degree)}return e.prototype.initialize=function(r){this.degree=r,this.genPoly=s.generateECPolynomial(this.degree)},e.prototype.encode=function(r){if(!this.genPoly)throw new Error("Encoder not initialized");const t=new Uint8Array(r.length+this.degree);t.set(r);const o=s.mod(t,this.genPoly),a=this.degree-o.length;if(a>0){const c=new Uint8Array(this.degree);return c.set(o,a),c}return o},He=e,He}var Ve={},je={},ze={},Bt;function qt(){return Bt||(Bt=1,ze.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}),ze}var J={},St;function xt(){if(St)return J;St=1;const s="[0-9]+",e="[A-Z $%*+\\-./:]+";let n="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";n=n.replace(/u/g,"\\u");const r="(?:(?![A-Z0-9 $%*+\\-./:]|"+n+`)(?:.|[\r
]))+`;J.KANJI=new RegExp(n,"g"),J.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),J.BYTE=new RegExp(r,"g"),J.NUMERIC=new RegExp(s,"g"),J.ALPHANUMERIC=new RegExp(e,"g");const t=new RegExp("^"+n+"$"),o=new RegExp("^"+s+"$"),a=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return J.testKanji=function(l){return t.test(l)},J.testNumeric=function(l){return o.test(l)},J.testAlphanumeric=function(l){return a.test(l)},J}var It;function ie(){return It||(It=1,function(s){const e=qt(),n=xt();s.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},s.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},s.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},s.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},s.MIXED={bit:-1},s.getCharCountIndicator=function(o,a){if(!o.ccBits)throw new Error("Invalid mode: "+o);if(!e.isValid(a))throw new Error("Invalid version: "+a);return a>=1&&a<10?o.ccBits[0]:a<27?o.ccBits[1]:o.ccBits[2]},s.getBestModeForData=function(o){return n.testNumeric(o)?s.NUMERIC:n.testAlphanumeric(o)?s.ALPHANUMERIC:n.testKanji(o)?s.KANJI:s.BYTE},s.toString=function(o){if(o&&o.id)return o.id;throw new Error("Invalid mode")},s.isValid=function(o){return o&&o.bit&&o.ccBits};function r(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"numeric":return s.NUMERIC;case"alphanumeric":return s.ALPHANUMERIC;case"kanji":return s.KANJI;case"byte":return s.BYTE;default:throw new Error("Unknown mode: "+t)}}s.from=function(o,a){if(s.isValid(o))return o;try{return r(o)}catch{return a}}}(je)),je}var Lt;function Nn(){return Lt||(Lt=1,function(s){const e=oe(),n=Ut(),r=nt(),t=ie(),o=qt(),a=7973,c=e.getBCHDigit(a);function l(f,y,b){for(let P=1;P<=40;P++)if(y<=s.getCapacity(P,b,f))return P}function h(f,y){return t.getCharCountIndicator(f,y)+4}function g(f,y){let b=0;return f.forEach(function(P){const F=h(P.mode,y);b+=F+P.getBitsLength()}),b}function w(f,y){for(let b=1;b<=40;b++)if(g(f,b)<=s.getCapacity(b,y,t.MIXED))return b}s.from=function(y,b){return o.isValid(y)?parseInt(y,10):b},s.getCapacity=function(y,b,P){if(!o.isValid(y))throw new Error("Invalid QR Code version");typeof P>"u"&&(P=t.BYTE);const F=e.getSymbolTotalCodewords(y),I=n.getTotalCodewordsCount(y,b),A=(F-I)*8;if(P===t.MIXED)return A;const E=A-h(P,y);switch(P){case t.NUMERIC:return Math.floor(E/10*3);case t.ALPHANUMERIC:return Math.floor(E/11*2);case t.KANJI:return Math.floor(E/13);case t.BYTE:default:return Math.floor(E/8)}},s.getBestVersionForData=function(y,b){let P;const F=r.from(b,r.M);if(Array.isArray(y)){if(y.length>1)return w(y,F);if(y.length===0)return 1;P=y[0]}else P=y;return l(P.mode,P.getLength(),F)},s.getEncodedBits=function(y){if(!o.isValid(y)||y<7)throw new Error("Invalid QR Code version");let b=y<<12;for(;e.getBCHDigit(b)-c>=0;)b^=a<<e.getBCHDigit(b)-c;return y<<12|b}}(Ve)),Ve}var Qe={},Tt;function Fn(){if(Tt)return Qe;Tt=1;const s=oe(),e=1335,n=21522,r=s.getBCHDigit(e);return Qe.getEncodedBits=function(o,a){const c=o.bit<<3|a;let l=c<<10;for(;s.getBCHDigit(l)-r>=0;)l^=e<<s.getBCHDigit(l)-r;return(c<<10|l)^n},Qe}var We={},Ke,bt;function $n(){if(bt)return Ke;bt=1;const s=ie();function e(n){this.mode=s.NUMERIC,this.data=n.toString()}return e.getBitsLength=function(r){return 10*Math.floor(r/3)+(r%3?r%3*3+1:0)},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(r){let t,o,a;for(t=0;t+3<=this.data.length;t+=3)o=this.data.substr(t,3),a=parseInt(o,10),r.put(a,10);const c=this.data.length-t;c>0&&(o=this.data.substr(t),a=parseInt(o,10),r.put(a,c*3+1))},Ke=e,Ke}var Je,Rt;function On(){if(Rt)return Je;Rt=1;const s=ie(),e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function n(r){this.mode=s.ALPHANUMERIC,this.data=r}return n.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(t){let o;for(o=0;o+2<=this.data.length;o+=2){let a=e.indexOf(this.data[o])*45;a+=e.indexOf(this.data[o+1]),t.put(a,11)}this.data.length%2&&t.put(e.indexOf(this.data[o]),6)},Je=n,Je}var Ye,_t;function Un(){if(_t)return Ye;_t=1;const s=ie();function e(n){this.mode=s.BYTE,typeof n=="string"?this.data=new TextEncoder().encode(n):this.data=new Uint8Array(n)}return e.getBitsLength=function(r){return r*8},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(n){for(let r=0,t=this.data.length;r<t;r++)n.put(this.data[r],8)},Ye=e,Ye}var Ge,Mt;function qn(){if(Mt)return Ge;Mt=1;const s=ie(),e=oe();function n(r){this.mode=s.KANJI,this.data=r}return n.getBitsLength=function(t){return t*13},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(r){let t;for(t=0;t<this.data.length;t++){let o=e.toSJIS(this.data[t]);if(o>=33088&&o<=40956)o-=33088;else if(o>=57408&&o<=60351)o-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);o=(o>>>8&255)*192+(o&255),r.put(o,13)}},Ge=n,Ge}var Xe={exports:{}},Pt;function xn(){return Pt||(Pt=1,function(s){var e={single_source_shortest_paths:function(n,r,t){var o={},a={};a[r]=0;var c=e.PriorityQueue.make();c.push(r,0);for(var l,h,g,w,f,y,b,P,F;!c.empty();){l=c.pop(),h=l.value,w=l.cost,f=n[h]||{};for(g in f)f.hasOwnProperty(g)&&(y=f[g],b=w+y,P=a[g],F=typeof a[g]>"u",(F||P>b)&&(a[g]=b,c.push(g,b),o[g]=h))}if(typeof t<"u"&&typeof a[t]>"u"){var I=["Could not find a path from ",r," to ",t,"."].join("");throw new Error(I)}return o},extract_shortest_path_from_predecessor_list:function(n,r){for(var t=[],o=r;o;)t.push(o),n[o],o=n[o];return t.reverse(),t},find_path:function(n,r,t){var o=e.single_source_shortest_paths(n,r,t);return e.extract_shortest_path_from_predecessor_list(o,t)},PriorityQueue:{make:function(n){var r=e.PriorityQueue,t={},o;n=n||{};for(o in r)r.hasOwnProperty(o)&&(t[o]=r[o]);return t.queue=[],t.sorter=n.sorter||r.default_sorter,t},default_sorter:function(n,r){return n.cost-r.cost},push:function(n,r){var t={value:n,cost:r};this.queue.push(t),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};s.exports=e}(Xe)),Xe.exports}var Dt;function Hn(){return Dt||(Dt=1,function(s){const e=ie(),n=$n(),r=On(),t=Un(),o=qn(),a=xt(),c=oe(),l=xn();function h(I){return unescape(encodeURIComponent(I)).length}function g(I,A,E){const C=[];let O;for(;(O=I.exec(E))!==null;)C.push({data:O[0],index:O.index,mode:A,length:O[0].length});return C}function w(I){const A=g(a.NUMERIC,e.NUMERIC,I),E=g(a.ALPHANUMERIC,e.ALPHANUMERIC,I);let C,O;return c.isKanjiModeEnabled()?(C=g(a.BYTE,e.BYTE,I),O=g(a.KANJI,e.KANJI,I)):(C=g(a.BYTE_KANJI,e.BYTE,I),O=[]),A.concat(E,C,O).sort(function(_,T){return _.index-T.index}).map(function(_){return{data:_.data,mode:_.mode,length:_.length}})}function f(I,A){switch(A){case e.NUMERIC:return n.getBitsLength(I);case e.ALPHANUMERIC:return r.getBitsLength(I);case e.KANJI:return o.getBitsLength(I);case e.BYTE:return t.getBitsLength(I)}}function y(I){return I.reduce(function(A,E){const C=A.length-1>=0?A[A.length-1]:null;return C&&C.mode===E.mode?(A[A.length-1].data+=E.data,A):(A.push(E),A)},[])}function b(I){const A=[];for(let E=0;E<I.length;E++){const C=I[E];switch(C.mode){case e.NUMERIC:A.push([C,{data:C.data,mode:e.ALPHANUMERIC,length:C.length},{data:C.data,mode:e.BYTE,length:C.length}]);break;case e.ALPHANUMERIC:A.push([C,{data:C.data,mode:e.BYTE,length:C.length}]);break;case e.KANJI:A.push([C,{data:C.data,mode:e.BYTE,length:h(C.data)}]);break;case e.BYTE:A.push([{data:C.data,mode:e.BYTE,length:h(C.data)}])}}return A}function P(I,A){const E={},C={start:{}};let O=["start"];for(let v=0;v<I.length;v++){const _=I[v],T=[];for(let p=0;p<_.length;p++){const M=_[p],R=""+v+p;T.push(R),E[R]={node:M,lastCount:0},C[R]={};for(let L=0;L<O.length;L++){const S=O[L];E[S]&&E[S].node.mode===M.mode?(C[S][R]=f(E[S].lastCount+M.length,M.mode)-f(E[S].lastCount,M.mode),E[S].lastCount+=M.length):(E[S]&&(E[S].lastCount=M.length),C[S][R]=f(M.length,M.mode)+4+e.getCharCountIndicator(M.mode,A))}}O=T}for(let v=0;v<O.length;v++)C[O[v]].end=0;return{map:C,table:E}}function F(I,A){let E;const C=e.getBestModeForData(I);if(E=e.from(A,C),E!==e.BYTE&&E.bit<C.bit)throw new Error('"'+I+'" cannot be encoded with mode '+e.toString(E)+`.
 Suggested mode is: `+e.toString(C));switch(E===e.KANJI&&!c.isKanjiModeEnabled()&&(E=e.BYTE),E){case e.NUMERIC:return new n(I);case e.ALPHANUMERIC:return new r(I);case e.KANJI:return new o(I);case e.BYTE:return new t(I)}}s.fromArray=function(A){return A.reduce(function(E,C){return typeof C=="string"?E.push(F(C,null)):C.data&&E.push(F(C.data,C.mode)),E},[])},s.fromString=function(A,E){const C=w(A,c.isKanjiModeEnabled()),O=b(C),v=P(O,E),_=l.find_path(v.map,"start","end"),T=[];for(let p=1;p<_.length-1;p++)T.push(v.table[_[p]].node);return s.fromArray(y(T))},s.rawSplit=function(A){return s.fromArray(w(A,c.isKanjiModeEnabled()))}}(We)),We}var At;function Vn(){if(At)return ke;At=1;const s=oe(),e=nt(),n=bn(),r=Rn(),t=_n(),o=Mn(),a=Pn(),c=Ut(),l=kn(),h=Nn(),g=Fn(),w=ie(),f=Hn();function y(v,_){const T=v.size,p=o.getPositions(_);for(let M=0;M<p.length;M++){const R=p[M][0],L=p[M][1];for(let S=-1;S<=7;S++)if(!(R+S<=-1||T<=R+S))for(let D=-1;D<=7;D++)L+D<=-1||T<=L+D||(S>=0&&S<=6&&(D===0||D===6)||D>=0&&D<=6&&(S===0||S===6)||S>=2&&S<=4&&D>=2&&D<=4?v.set(R+S,L+D,!0,!0):v.set(R+S,L+D,!1,!0))}}function b(v){const _=v.size;for(let T=8;T<_-8;T++){const p=T%2===0;v.set(T,6,p,!0),v.set(6,T,p,!0)}}function P(v,_){const T=t.getPositions(_);for(let p=0;p<T.length;p++){const M=T[p][0],R=T[p][1];for(let L=-2;L<=2;L++)for(let S=-2;S<=2;S++)L===-2||L===2||S===-2||S===2||L===0&&S===0?v.set(M+L,R+S,!0,!0):v.set(M+L,R+S,!1,!0)}}function F(v,_){const T=v.size,p=h.getEncodedBits(_);let M,R,L;for(let S=0;S<18;S++)M=Math.floor(S/3),R=S%3+T-8-3,L=(p>>S&1)===1,v.set(M,R,L,!0),v.set(R,M,L,!0)}function I(v,_,T){const p=v.size,M=g.getEncodedBits(_,T);let R,L;for(R=0;R<15;R++)L=(M>>R&1)===1,R<6?v.set(R,8,L,!0):R<8?v.set(R+1,8,L,!0):v.set(p-15+R,8,L,!0),R<8?v.set(8,p-R-1,L,!0):R<9?v.set(8,15-R-1+1,L,!0):v.set(8,15-R-1,L,!0);v.set(p-8,8,1,!0)}function A(v,_){const T=v.size;let p=-1,M=T-1,R=7,L=0;for(let S=T-1;S>0;S-=2)for(S===6&&S--;;){for(let D=0;D<2;D++)if(!v.isReserved(M,S-D)){let Q=!1;L<_.length&&(Q=(_[L]>>>R&1)===1),v.set(M,S-D,Q),R--,R===-1&&(L++,R=7)}if(M+=p,M<0||T<=M){M-=p,p=-p;break}}}function E(v,_,T){const p=new n;T.forEach(function(D){p.put(D.mode.bit,4),p.put(D.getLength(),w.getCharCountIndicator(D.mode,v)),D.write(p)});const M=s.getSymbolTotalCodewords(v),R=c.getTotalCodewordsCount(v,_),L=(M-R)*8;for(p.getLengthInBits()+4<=L&&p.put(0,4);p.getLengthInBits()%8!==0;)p.putBit(0);const S=(L-p.getLengthInBits())/8;for(let D=0;D<S;D++)p.put(D%2?17:236,8);return C(p,v,_)}function C(v,_,T){const p=s.getSymbolTotalCodewords(_),M=c.getTotalCodewordsCount(_,T),R=p-M,L=c.getBlocksCount(_,T),S=p%L,D=L-S,Q=Math.floor(p/L),Y=Math.floor(R/L),te=Y+1,pe=Q-Y,fe=new l(pe);let ae=0;const q=new Array(L),W=new Array(L);let U=0;const se=new Uint8Array(v.buffer);for(let V=0;V<L;V++){const X=V<D?Y:te;q[V]=se.slice(ae,ae+X),W[V]=fe.encode(q[V]),ae+=X,U=Math.max(U,X)}const G=new Uint8Array(p);let he=0,j,H;for(j=0;j<U;j++)for(H=0;H<L;H++)j<q[H].length&&(G[he++]=q[H][j]);for(j=0;j<pe;j++)for(H=0;H<L;H++)G[he++]=W[H][j];return G}function O(v,_,T,p){let M;if(Array.isArray(v))M=f.fromArray(v);else if(typeof v=="string"){let Q=_;if(!Q){const Y=f.rawSplit(v);Q=h.getBestVersionForData(Y,T)}M=f.fromString(v,Q||40)}else throw new Error("Invalid data");const R=h.getBestVersionForData(M,T);if(!R)throw new Error("The amount of data is too big to be stored in a QR Code");if(!_)_=R;else if(_<R)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+R+`.
`);const L=E(_,T,M),S=s.getSymbolSize(_),D=new r(S);return y(D,_),b(D),P(D,_),I(D,T,0),_>=7&&F(D,_),A(D,L),isNaN(p)&&(p=a.getBestMask(D,I.bind(null,D,T))),a.applyMask(p,D),I(D,T,p),{modules:D,version:_,errorCorrectionLevel:T,maskPattern:p,segments:M}}return ke.create=function(_,T){if(typeof _>"u"||_==="")throw new Error("No input text");let p=e.M,M,R;return typeof T<"u"&&(p=e.from(T.errorCorrectionLevel,e.M),M=h.from(T.version),R=a.from(T.maskPattern),T.toSJISFunc&&s.setToSJISFunction(T.toSJISFunc)),O(_,M,p,R)},ke}var Ze={},et={},kt;function Ht(){return kt||(kt=1,function(s){function e(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let r=n.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+n);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(o){return[o,o]}))),r.length===6&&r.push("F","F");const t=parseInt(r.join(""),16);return{r:t>>24&255,g:t>>16&255,b:t>>8&255,a:t&255,hex:"#"+r.slice(0,6).join("")}}s.getOptions=function(r){r||(r={}),r.color||(r.color={});const t=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,o=r.width&&r.width>=21?r.width:void 0,a=r.scale||4;return{width:o,scale:o?4:a,margin:t,color:{dark:e(r.color.dark||"#000000ff"),light:e(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},s.getScale=function(r,t){return t.width&&t.width>=r+t.margin*2?t.width/(r+t.margin*2):t.scale},s.getImageWidth=function(r,t){const o=s.getScale(r,t);return Math.floor((r+t.margin*2)*o)},s.qrToImageData=function(r,t,o){const a=t.modules.size,c=t.modules.data,l=s.getScale(a,o),h=Math.floor((a+o.margin*2)*l),g=o.margin*l,w=[o.color.light,o.color.dark];for(let f=0;f<h;f++)for(let y=0;y<h;y++){let b=(f*h+y)*4,P=o.color.light;if(f>=g&&y>=g&&f<h-g&&y<h-g){const F=Math.floor((f-g)/l),I=Math.floor((y-g)/l);P=w[c[F*a+I]?1:0]}r[b++]=P.r,r[b++]=P.g,r[b++]=P.b,r[b]=P.a}}}(et)),et}var Nt;function jn(){return Nt||(Nt=1,function(s){const e=Ht();function n(t,o,a){t.clearRect(0,0,o.width,o.height),o.style||(o.style={}),o.height=a,o.width=a,o.style.height=a+"px",o.style.width=a+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}s.render=function(o,a,c){let l=c,h=a;typeof l>"u"&&(!a||!a.getContext)&&(l=a,a=void 0),a||(h=r()),l=e.getOptions(l);const g=e.getImageWidth(o.modules.size,l),w=h.getContext("2d"),f=w.createImageData(g,g);return e.qrToImageData(f.data,o,l),n(w,h,g),w.putImageData(f,0,0),h},s.renderToDataURL=function(o,a,c){let l=c;typeof l>"u"&&(!a||!a.getContext)&&(l=a,a=void 0),l||(l={});const h=s.render(o,a,l),g=l.type||"image/png",w=l.rendererOpts||{};return h.toDataURL(g,w.quality)}}(Ze)),Ze}var tt={},Ft;function zn(){if(Ft)return tt;Ft=1;const s=Ht();function e(t,o){const a=t.a/255,c=o+'="'+t.hex+'"';return a<1?c+" "+o+'-opacity="'+a.toFixed(2).slice(1)+'"':c}function n(t,o,a){let c=t+o;return typeof a<"u"&&(c+=" "+a),c}function r(t,o,a){let c="",l=0,h=!1,g=0;for(let w=0;w<t.length;w++){const f=Math.floor(w%o),y=Math.floor(w/o);!f&&!h&&(h=!0),t[w]?(g++,w>0&&f>0&&t[w-1]||(c+=h?n("M",f+a,.5+y+a):n("m",l,0),l=0,h=!1),f+1<o&&t[w+1]||(c+=n("h",g),g=0)):l++}return c}return tt.render=function(o,a,c){const l=s.getOptions(a),h=o.modules.size,g=o.modules.data,w=h+l.margin*2,f=l.color.light.a?"<path "+e(l.color.light,"fill")+' d="M0 0h'+w+"v"+w+'H0z"/>':"",y="<path "+e(l.color.dark,"stroke")+' d="'+r(g,h,l.margin)+'"/>',b='viewBox="0 0 '+w+" "+w+'"',F='<svg xmlns="http://www.w3.org/2000/svg" '+(l.width?'width="'+l.width+'" height="'+l.width+'" ':"")+b+' shape-rendering="crispEdges">'+f+y+`</svg>
`;return typeof c=="function"&&c(null,F),F},tt}var $t;function Qn(){if($t)return ue;$t=1;const s=Tn(),e=Vn(),n=jn(),r=zn();function t(o,a,c,l,h){const g=[].slice.call(arguments,1),w=g.length,f=typeof g[w-1]=="function";if(!f&&!s())throw new Error("Callback required as last argument");if(f){if(w<2)throw new Error("Too few arguments provided");w===2?(h=c,c=a,a=l=void 0):w===3&&(a.getContext&&typeof h>"u"?(h=l,l=void 0):(h=l,l=c,c=a,a=void 0))}else{if(w<1)throw new Error("Too few arguments provided");return w===1?(c=a,a=l=void 0):w===2&&!a.getContext&&(l=c,c=a,a=void 0),new Promise(function(y,b){try{const P=e.create(c,l);y(o(P,a,l))}catch(P){b(P)}})}try{const y=e.create(c,l);h(null,o(y,a,l))}catch(y){h(y)}}return ue.create=e.create,ue.toCanvas=t.bind(null,n.render),ue.toDataURL=t.bind(null,n.renderToDataURL),ue.toString=t.bind(null,function(o,a,c){return r.render(o,c)}),ue}var Wn=Qn();const Kn=Ln(Wn),Jn="modulepreload",Yn=function(s){return"/"+s},Ot={},Gn=function(e,n,r){let t=Promise.resolve();if(n&&n.length>0){let a=function(h){return Promise.all(h.map(g=>Promise.resolve(g).then(w=>({status:"fulfilled",value:w}),w=>({status:"rejected",reason:w}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),l=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));t=a(n.map(h=>{if(h=Yn(h),h in Ot)return;Ot[h]=!0;const g=h.endsWith(".css"),w=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${w}`))return;const f=document.createElement("link");if(f.rel=g?"stylesheet":Jn,g||(f.as="script"),f.crossOrigin="",f.href=h,l&&f.setAttribute("nonce",l),document.head.appendChild(f),g)return new Promise((y,b)=>{f.addEventListener("load",y),f.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${h}`)))})}))}function o(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return t.then(a=>{for(const c of a||[])c.status==="rejected"&&o(c.reason);return e().catch(o)})};class k{constructor(e,n,r,t,o){this._legacyCanvasSize=k.DEFAULT_CANVAS_SIZE,this._preferredCamera="environment",this._maxScansPerSecond=25,this._lastScanTimestamp=-1,this._destroyed=this._flashOn=this._paused=this._active=!1,this.$video=e,this.$canvas=document.createElement("canvas"),r&&typeof r=="object"?this._onDecode=n:(console.warn(r||t||o?"You're using a deprecated version of the QrScanner constructor which will be removed in the future":"Note that the type of the scan result passed to onDecode will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),this._legacyOnDecode=n),n=typeof r=="object"?r:{},this._onDecodeError=n.onDecodeError||(typeof r=="function"?r:this._onDecodeError),this._calculateScanRegion=n.calculateScanRegion||(typeof t=="function"?t:this._calculateScanRegion),this._preferredCamera=n.preferredCamera||o||this._preferredCamera,this._legacyCanvasSize=typeof r=="number"?r:typeof t=="number"?t:this._legacyCanvasSize,this._maxScansPerSecond=n.maxScansPerSecond||this._maxScansPerSecond,this._onPlay=this._onPlay.bind(this),this._onLoadedMetaData=this._onLoadedMetaData.bind(this),this._onVisibilityChange=this._onVisibilityChange.bind(this),this._updateOverlay=this._updateOverlay.bind(this),e.disablePictureInPicture=!0,e.playsInline=!0,e.muted=!0;let a=!1;if(e.hidden&&(e.hidden=!1,a=!0),document.body.contains(e)||(document.body.appendChild(e),a=!0),r=e.parentElement,n.highlightScanRegion||n.highlightCodeOutline){if(t=!!n.overlay,this.$overlay=n.overlay||document.createElement("div"),o=this.$overlay.style,o.position="absolute",o.display="none",o.pointerEvents="none",this.$overlay.classList.add("scan-region-highlight"),!t&&n.highlightScanRegion){this.$overlay.innerHTML='<svg class="scan-region-highlight-svg" viewBox="0 0 238 238" preserveAspectRatio="none" style="position:absolute;width:100%;height:100%;left:0;top:0;fill:none;stroke:#e9b213;stroke-width:4;stroke-linecap:round;stroke-linejoin:round"><path d="M31 2H10a8 8 0 0 0-8 8v21M207 2h21a8 8 0 0 1 8 8v21m0 176v21a8 8 0 0 1-8 8h-21m-176 0H10a8 8 0 0 1-8-8v-21"/></svg>';try{this.$overlay.firstElementChild.animate({transform:["scale(.98)","scale(1.01)"]},{duration:400,iterations:1/0,direction:"alternate",easing:"ease-in-out"})}catch{}r.insertBefore(this.$overlay,this.$video.nextSibling)}n.highlightCodeOutline&&(this.$overlay.insertAdjacentHTML("beforeend",'<svg class="code-outline-highlight" preserveAspectRatio="none" style="display:none;width:100%;height:100%;fill:none;stroke:#e9b213;stroke-width:5;stroke-dasharray:25;stroke-linecap:round;stroke-linejoin:round"><polygon/></svg>'),this.$codeOutlineHighlight=this.$overlay.lastElementChild)}this._scanRegion=this._calculateScanRegion(e),requestAnimationFrame(()=>{let c=window.getComputedStyle(e);c.display==="none"&&(e.style.setProperty("display","block","important"),a=!0),c.visibility!=="visible"&&(e.style.setProperty("visibility","visible","important"),a=!0),a&&(console.warn("QrScanner has overwritten the video hiding style to avoid Safari stopping the playback."),e.style.opacity="0",e.style.width="0",e.style.height="0",this.$overlay&&this.$overlay.parentElement&&this.$overlay.parentElement.removeChild(this.$overlay),delete this.$overlay,delete this.$codeOutlineHighlight),this.$overlay&&this._updateOverlay()}),e.addEventListener("play",this._onPlay),e.addEventListener("loadedmetadata",this._onLoadedMetaData),document.addEventListener("visibilitychange",this._onVisibilityChange),window.addEventListener("resize",this._updateOverlay),this._qrEnginePromise=k.createQrEngine()}static set WORKER_PATH(e){console.warn("Setting QrScanner.WORKER_PATH is not required and not supported anymore. Have a look at the README for new setup instructions.")}static async hasCamera(){try{return!!(await k.listCameras(!1)).length}catch{return!1}}static async listCameras(e=!1){if(!navigator.mediaDevices)return[];let n=async()=>(await navigator.mediaDevices.enumerateDevices()).filter(t=>t.kind==="videoinput"),r;try{e&&(await n()).every(t=>!t.label)&&(r=await navigator.mediaDevices.getUserMedia({audio:!1,video:!0}))}catch{}try{return(await n()).map((t,o)=>({id:t.deviceId,label:t.label||(o===0?"Default Camera":`Camera ${o+1}`)}))}finally{r&&(console.warn("Call listCameras after successfully starting a QR scanner to avoid creating a temporary video stream"),k._stopVideoStream(r))}}async hasFlash(){let e;try{if(this.$video.srcObject){if(!(this.$video.srcObject instanceof MediaStream))return!1;e=this.$video.srcObject}else e=(await this._getCameraStream()).stream;return"torch"in e.getVideoTracks()[0].getSettings()}catch{return!1}finally{e&&e!==this.$video.srcObject&&(console.warn("Call hasFlash after successfully starting the scanner to avoid creating a temporary video stream"),k._stopVideoStream(e))}}isFlashOn(){return this._flashOn}async toggleFlash(){this._flashOn?await this.turnFlashOff():await this.turnFlashOn()}async turnFlashOn(){if(!this._flashOn&&!this._destroyed&&(this._flashOn=!0,this._active&&!this._paused))try{if(!await this.hasFlash())throw"No flash available";await this.$video.srcObject.getVideoTracks()[0].applyConstraints({advanced:[{torch:!0}]})}catch(e){throw this._flashOn=!1,e}}async turnFlashOff(){this._flashOn&&(this._flashOn=!1,await this._restartVideoStream())}destroy(){this.$video.removeEventListener("loadedmetadata",this._onLoadedMetaData),this.$video.removeEventListener("play",this._onPlay),document.removeEventListener("visibilitychange",this._onVisibilityChange),window.removeEventListener("resize",this._updateOverlay),this._destroyed=!0,this._flashOn=!1,this.stop(),k._postWorkerMessage(this._qrEnginePromise,"close")}async start(){if(this._destroyed)throw Error("The QR scanner can not be started as it had been destroyed.");if((!this._active||this._paused)&&(window.location.protocol!=="https:"&&console.warn("The camera stream is only accessible if the page is transferred via https."),this._active=!0,!document.hidden))if(this._paused=!1,this.$video.srcObject)await this.$video.play();else try{let{stream:e,facingMode:n}=await this._getCameraStream();!this._active||this._paused?k._stopVideoStream(e):(this._setVideoMirror(n),this.$video.srcObject=e,await this.$video.play(),this._flashOn&&(this._flashOn=!1,this.turnFlashOn().catch(()=>{})))}catch(e){if(!this._paused)throw this._active=!1,e}}stop(){this.pause(),this._active=!1}async pause(e=!1){if(this._paused=!0,!this._active)return!0;this.$video.pause(),this.$overlay&&(this.$overlay.style.display="none");let n=()=>{this.$video.srcObject instanceof MediaStream&&(k._stopVideoStream(this.$video.srcObject),this.$video.srcObject=null)};return e?(n(),!0):(await new Promise(r=>setTimeout(r,300)),this._paused?(n(),!0):!1)}async setCamera(e){e!==this._preferredCamera&&(this._preferredCamera=e,await this._restartVideoStream())}static async scanImage(e,n,r,t,o=!1,a=!1){let c,l=!1;n&&("scanRegion"in n||"qrEngine"in n||"canvas"in n||"disallowCanvasResizing"in n||"alsoTryWithoutScanRegion"in n||"returnDetailedScanResult"in n)?(c=n.scanRegion,r=n.qrEngine,t=n.canvas,o=n.disallowCanvasResizing||!1,a=n.alsoTryWithoutScanRegion||!1,l=!0):console.warn(n||r||t||o||a?"You're using a deprecated api for scanImage which will be removed in the future.":"Note that the return type of scanImage will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),n=!!r;try{let h,g;[r,h]=await Promise.all([r||k.createQrEngine(),k._loadImage(e)]),[t,g]=k._drawToCanvas(h,c,t,o);let w;if(r instanceof Worker){let f=r;n||k._postWorkerMessageSync(f,"inversionMode","both"),w=await new Promise((y,b)=>{let P,F,I,A=-1;F=C=>{C.data.id===A&&(f.removeEventListener("message",F),f.removeEventListener("error",I),clearTimeout(P),C.data.data!==null?y({data:C.data.data,cornerPoints:k._convertPoints(C.data.cornerPoints,c)}):b(k.NO_QR_CODE_FOUND))},I=C=>{f.removeEventListener("message",F),f.removeEventListener("error",I),clearTimeout(P),b("Scanner error: "+(C?C.message||C:"Unknown Error"))},f.addEventListener("message",F),f.addEventListener("error",I),P=setTimeout(()=>I("timeout"),1e4);let E=g.getImageData(0,0,t.width,t.height);A=k._postWorkerMessageSync(f,"decode",E,[E.data.buffer])})}else w=await Promise.race([new Promise((f,y)=>window.setTimeout(()=>y("Scanner error: timeout"),1e4)),(async()=>{try{var[f]=await r.detect(t);if(!f)throw k.NO_QR_CODE_FOUND;return{data:f.rawValue,cornerPoints:k._convertPoints(f.cornerPoints,c)}}catch(y){if(f=y.message||y,/not implemented|service unavailable/.test(f))return k._disableBarcodeDetector=!0,k.scanImage(e,{scanRegion:c,canvas:t,disallowCanvasResizing:o,alsoTryWithoutScanRegion:a});throw`Scanner error: ${f}`}})()]);return l?w:w.data}catch(h){if(!c||!a)throw h;let g=await k.scanImage(e,{qrEngine:r,canvas:t,disallowCanvasResizing:o});return l?g:g.data}finally{n||k._postWorkerMessage(r,"close")}}setGrayscaleWeights(e,n,r,t=!0){k._postWorkerMessage(this._qrEnginePromise,"grayscaleWeights",{red:e,green:n,blue:r,useIntegerApproximation:t})}setInversionMode(e){k._postWorkerMessage(this._qrEnginePromise,"inversionMode",e)}static async createQrEngine(e){if(e&&console.warn("Specifying a worker path is not required and not supported anymore."),e=()=>Gn(()=>import("./qr-scanner-worker.min-D85Z9gVD.js"),[]).then(r=>r.createWorker()),!(!k._disableBarcodeDetector&&"BarcodeDetector"in window&&BarcodeDetector.getSupportedFormats&&(await BarcodeDetector.getSupportedFormats()).includes("qr_code")))return e();let n=navigator.userAgentData;return n&&n.brands.some(({brand:r})=>/Chromium/i.test(r))&&/mac ?OS/i.test(n.platform)&&await n.getHighEntropyValues(["architecture","platformVersion"]).then(({architecture:r,platformVersion:t})=>/arm/i.test(r||"arm")&&13<=parseInt(t||"13")).catch(()=>!0)?e():new BarcodeDetector({formats:["qr_code"]})}_onPlay(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay(),this.$overlay&&(this.$overlay.style.display=""),this._scanFrame()}_onLoadedMetaData(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay()}_onVisibilityChange(){document.hidden?this.pause():this._active&&this.start()}_calculateScanRegion(e){let n=Math.round(.6666666666666666*Math.min(e.videoWidth,e.videoHeight));return{x:Math.round((e.videoWidth-n)/2),y:Math.round((e.videoHeight-n)/2),width:n,height:n,downScaledWidth:this._legacyCanvasSize,downScaledHeight:this._legacyCanvasSize}}_updateOverlay(){requestAnimationFrame(()=>{if(this.$overlay){var e=this.$video,n=e.videoWidth,r=e.videoHeight,t=e.offsetWidth,o=e.offsetHeight,a=e.offsetLeft,c=e.offsetTop,l=window.getComputedStyle(e),h=l.objectFit,g=n/r,w=t/o;switch(h){case"none":var f=n,y=r;break;case"fill":f=t,y=o;break;default:(h==="cover"?g>w:g<w)?(y=o,f=y*g):(f=t,y=f/g),h==="scale-down"&&(f=Math.min(f,n),y=Math.min(y,r))}var[b,P]=l.objectPosition.split(" ").map((I,A)=>{const E=parseFloat(I);return I.endsWith("%")?(A?o-y:t-f)*E/100:E});l=this._scanRegion.width||n,w=this._scanRegion.height||r,h=this._scanRegion.x||0;var F=this._scanRegion.y||0;g=this.$overlay.style,g.width=`${l/n*f}px`,g.height=`${w/r*y}px`,g.top=`${c+P+F/r*y}px`,r=/scaleX\(-1\)/.test(e.style.transform),g.left=`${a+(r?t-b-f:b)+(r?n-h-l:h)/n*f}px`,g.transform=e.style.transform}})}static _convertPoints(e,n){if(!n)return e;let r=n.x||0,t=n.y||0,o=n.width&&n.downScaledWidth?n.width/n.downScaledWidth:1;n=n.height&&n.downScaledHeight?n.height/n.downScaledHeight:1;for(let a of e)a.x=a.x*o+r,a.y=a.y*n+t;return e}_scanFrame(){!this._active||this.$video.paused||this.$video.ended||("requestVideoFrameCallback"in this.$video?this.$video.requestVideoFrameCallback.bind(this.$video):requestAnimationFrame)(async()=>{if(!(1>=this.$video.readyState)){var e=Date.now()-this._lastScanTimestamp,n=1e3/this._maxScansPerSecond;e<n&&await new Promise(t=>setTimeout(t,n-e)),this._lastScanTimestamp=Date.now();try{var r=await k.scanImage(this.$video,{scanRegion:this._scanRegion,qrEngine:this._qrEnginePromise,canvas:this.$canvas})}catch(t){if(!this._active)return;this._onDecodeError(t)}!k._disableBarcodeDetector||await this._qrEnginePromise instanceof Worker||(this._qrEnginePromise=k.createQrEngine()),r?(this._onDecode?this._onDecode(r):this._legacyOnDecode&&this._legacyOnDecode(r.data),this.$codeOutlineHighlight&&(clearTimeout(this._codeOutlineHighlightRemovalTimeout),this._codeOutlineHighlightRemovalTimeout=void 0,this.$codeOutlineHighlight.setAttribute("viewBox",`${this._scanRegion.x||0} ${this._scanRegion.y||0} ${this._scanRegion.width||this.$video.videoWidth} ${this._scanRegion.height||this.$video.videoHeight}`),this.$codeOutlineHighlight.firstElementChild.setAttribute("points",r.cornerPoints.map(({x:t,y:o})=>`${t},${o}`).join(" ")),this.$codeOutlineHighlight.style.display="")):this.$codeOutlineHighlight&&!this._codeOutlineHighlightRemovalTimeout&&(this._codeOutlineHighlightRemovalTimeout=setTimeout(()=>this.$codeOutlineHighlight.style.display="none",100))}this._scanFrame()})}_onDecodeError(e){e!==k.NO_QR_CODE_FOUND&&console.log(e)}async _getCameraStream(){if(!navigator.mediaDevices)throw"Camera not found.";let e=/^(environment|user)$/.test(this._preferredCamera)?"facingMode":"deviceId",n=[{width:{min:1024}},{width:{min:768}},{}],r=n.map(t=>Object.assign({},t,{[e]:{exact:this._preferredCamera}}));for(let t of[...r,...n])try{let o=await navigator.mediaDevices.getUserMedia({video:t,audio:!1}),a=this._getFacingMode(o)||(t.facingMode?this._preferredCamera:this._preferredCamera==="environment"?"user":"environment");return{stream:o,facingMode:a}}catch{}throw"Camera not found."}async _restartVideoStream(){let e=this._paused;await this.pause(!0)&&!e&&this._active&&await this.start()}static _stopVideoStream(e){for(let n of e.getTracks())n.stop(),e.removeTrack(n)}_setVideoMirror(e){this.$video.style.transform="scaleX("+(e==="user"?-1:1)+")"}_getFacingMode(e){return(e=e.getVideoTracks()[0])?/rear|back|environment/i.test(e.label)?"environment":/front|user|face/i.test(e.label)?"user":null:null}static _drawToCanvas(e,n,r,t=!1){r=r||document.createElement("canvas");let o=n&&n.x?n.x:0,a=n&&n.y?n.y:0,c=n&&n.width?n.width:e.videoWidth||e.width,l=n&&n.height?n.height:e.videoHeight||e.height;return t||(t=n&&n.downScaledWidth?n.downScaledWidth:c,n=n&&n.downScaledHeight?n.downScaledHeight:l,r.width!==t&&(r.width=t),r.height!==n&&(r.height=n)),n=r.getContext("2d",{alpha:!1}),n.imageSmoothingEnabled=!1,n.drawImage(e,o,a,c,l,0,0,r.width,r.height),[r,n]}static async _loadImage(e){if(e instanceof Image)return await k._awaitImageLoad(e),e;if(e instanceof HTMLVideoElement||e instanceof HTMLCanvasElement||e instanceof SVGImageElement||"OffscreenCanvas"in window&&e instanceof OffscreenCanvas||"ImageBitmap"in window&&e instanceof ImageBitmap)return e;if(e instanceof File||e instanceof Blob||e instanceof URL||typeof e=="string"){let n=new Image;n.src=e instanceof File||e instanceof Blob?URL.createObjectURL(e):e.toString();try{return await k._awaitImageLoad(n),n}finally{(e instanceof File||e instanceof Blob)&&URL.revokeObjectURL(n.src)}}else throw"Unsupported image type."}static async _awaitImageLoad(e){e.complete&&e.naturalWidth!==0||await new Promise((n,r)=>{let t=o=>{e.removeEventListener("load",t),e.removeEventListener("error",t),o instanceof ErrorEvent?r("Image load error"):n()};e.addEventListener("load",t),e.addEventListener("error",t)})}static async _postWorkerMessage(e,n,r,t){return k._postWorkerMessageSync(await e,n,r,t)}static _postWorkerMessageSync(e,n,r,t){if(!(e instanceof Worker))return-1;let o=k._workerMessageId++;return e.postMessage({id:o,type:n,data:r},t),o}}k.DEFAULT_CANVAS_SIZE=400;k.NO_QR_CODE_FOUND="No QR code found";k._disableBarcodeDetector=!1;k._workerMessageId=0;document.addEventListener("DOMContentLoaded",()=>{const s=document.getElementById("userForm"),e=document.getElementById("usuariosContainer"),n=document.getElementById("searchInput"),r=document.getElementById("clearSearch"),t=document.getElementById("cargoFilter"),o=document.getElementById("sortBy"),a=document.getElementById("exportData"),c=document.getElementById("gridView"),l=document.getElementById("listView"),h=document.getElementById("itemsPerPageSelect"),g=document.getElementById("firstPage"),w=document.getElementById("prevPage"),f=document.getElementById("nextPage"),y=document.getElementById("lastPage"),b=document.getElementById("pageNumbers"),P=document.getElementById("pageInfo"),F=document.getElementById("totalUsers"),I=document.getElementById("newUsersToday"),A=document.getElementById("filteredUsers"),E=document.getElementById("confirmModal"),C=document.getElementById("editModal"),O=document.getElementById("cameraModal"),v=document.getElementById("shareModal"),_=document.getElementById("emptyState"),T=document.getElementById("foto"),p=document.getElementById("filePreview"),M=document.getElementById("openCamera"),R=document.getElementById("scanQR"),L=document.getElementById("cameraVideo"),S=document.getElementById("cameraCanvas"),D=document.getElementById("captureBtn"),Q=document.getElementById("closeCameraBtn"),Y=document.getElementById("switchCameraBtn"),te=document.getElementById("flashBtn"),pe=document.getElementById("galleryBtn"),fe=document.getElementById("qrOverlay"),ae=document.getElementById("cameraTitle");let q=[],W=[],U=1,se=4,G="grid",he="nome",j="",H="",V=null,X="user",ne=!1,re=null,ve=!1;Vt();function Vt(){fn(),Jt(),Me(),Z(),z(),K(),jt()}function jt(){zt(),Qt(),Wt()}function zt(){[F,I,A].forEach((d,u)=>{const m=parseInt(d.textContent)||0;let B=0;const N=m/30,x=setInterval(()=>{B+=N,B>=m?(d.textContent=m,clearInterval(x)):d.textContent=Math.floor(B)},50+u*20)})}function Qt(){const i="Buscar por nome, email ou cargo...";let d=0;const u=()=>{d<i.length&&(n.placeholder=i.substring(0,d+1),d++,setTimeout(u,100))};setTimeout(u,2e3)}function Wt(){document.querySelectorAll("button, .btn-primary, .btn-secondary, .btn-danger, .btn-export").forEach(i=>{i.addEventListener("click",Kt)}),document.querySelectorAll("input, select").forEach(i=>{i.addEventListener("invalid",d=>{d.target.style.animation="shake 0.5s ease-in-out",setTimeout(()=>{d.target.style.animation=""},500)})})}function Kt(i){const d=i.currentTarget,u=d.getBoundingClientRect(),m=Math.max(u.width,u.height),B=i.clientX-u.left-m/2,N=i.clientY-u.top-m/2,x=document.createElement("span");x.style.cssText=`
            position: absolute;
            width: ${m}px;
            height: ${m}px;
            left: ${B}px;
            top: ${N}px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            transform: scale(0);
            animation: ripple 0.6s ease-out;
            pointer-events: none;
        `,d.style.position="relative",d.style.overflow="hidden",d.appendChild(x),setTimeout(()=>{x.remove()},600)}function Jt(){s.addEventListener("submit",hn),document.getElementById("clearForm").addEventListener("click",at),n.addEventListener("input",Yt(yn,300)),r.addEventListener("click",st),t.addEventListener("change",pn),o.addEventListener("change",vn),c.addEventListener("click",()=>ct("grid")),l.addEventListener("click",()=>ct("list")),g.addEventListener("click",()=>le(1)),w.addEventListener("click",()=>le(U-1)),f.addEventListener("click",()=>le(U+1)),y.addEventListener("click",()=>le(Ce())),h.addEventListener("change",wn),a.addEventListener("click",In),T.addEventListener("change",gn),M.addEventListener("click",en),R.addEventListener("click",tn),D.addEventListener("click",rn),Q.addEventListener("click",ce),Y.addEventListener("click",an),te.addEventListener("click",sn),pe.addEventListener("click",cn),Xt(),Zt(),Gt()}function Yt(i,d){let u;return function(...B){const N=()=>{clearTimeout(u),i(...B)};clearTimeout(u),u=setTimeout(N,d)}}function Gt(){document.querySelectorAll('input[type="text"], input[type="email"], textarea').forEach(i=>{i.addEventListener("keydown",d=>{i.style.transform="scale(1.01)",setTimeout(()=>{i.style.transform="scale(1)"},100)})}),document.addEventListener("keydown",i=>{(i.ctrlKey||i.metaKey)&&i.key==="k"&&(i.preventDefault(),n.focus(),n.select()),i.key==="Escape"&&document.activeElement===n&&st()})}function Xt(){document.getElementById("modalClose").addEventListener("click",me),document.getElementById("modalCancel").addEventListener("click",me),document.getElementById("modalConfirm").addEventListener("click",Cn),document.getElementById("editModalClose").addEventListener("click",ge),document.getElementById("editModalCancel").addEventListener("click",ge),document.getElementById("editModalSave").addEventListener("click",Sn),document.getElementById("shareModalClose").addEventListener("click",_e),document.getElementById("downloadQRBtn").addEventListener("click",dn),document.getElementById("shareQRBtn").addEventListener("click",un),E.addEventListener("click",i=>{i.target===E&&me()}),C.addEventListener("click",i=>{i.target===C&&ge()}),O.addEventListener("click",i=>{i.target===O&&ce()}),v.addEventListener("click",i=>{i.target===v&&_e()}),document.addEventListener("keydown",i=>{i.key==="Escape"&&(E.classList.contains("show")&&me(),C.classList.contains("show")&&ge(),O.classList.contains("show")&&ce(),v.classList.contains("show")&&_e())})}function Zt(){[{id:"nome",validator:Ie},{id:"email",validator:Le},{id:"telefone",validator:Te},{id:"cargo",validator:be}].forEach(({id:d,validator:u})=>{const m=document.getElementById(d),B=document.getElementById(`${d}Error`);m.addEventListener("blur",()=>{const N=u(m.value.trim());Se(B,N,m)}),m.addEventListener("input",()=>{if(B.textContent){const N=u(m.value.trim());Se(B,N,m)}}),m.addEventListener("input",()=>{const N=!u(m.value.trim());m.style.borderColor=N?"var(--success-color)":"",N&&m.value.trim()?m.style.boxShadow="0 0 0 3px rgba(52, 199, 89, 0.1)":m.style.boxShadow=""})})}function Se(i,d,u){i.textContent=d||"",d?(u.style.borderColor="var(--danger-color)",u.style.animation="shake 0.5s ease-in-out",setTimeout(()=>{u.style.animation=""},500)):u.style.borderColor=""}function Ie(i){return i?i.length<2?"Nome deve ter pelo menos 2 caracteres":i.length>100?"Nome deve ter no máximo 100 caracteres":/^[a-zA-ZÀ-ÿ\s]+$/.test(i)?"":"Nome deve conter apenas letras e espaços":"Nome é obrigatório"}function Le(i){var B;if(!i)return"Email é obrigatório";if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i))return"Email inválido";if(i.length>255)return"Email muito longo";const u=q.find(N=>N.email.toLowerCase()===i.toLowerCase()),m=(B=document.getElementById("editUserId"))==null?void 0:B.value;return u&&u.id!=m?"Este email já está cadastrado":""}function Te(i){return i?/^\(?\d{2}\)?\s?\d{4,5}-?\d{4}$/.test(i)?"":"Formato inválido. Use: (11) 99999-9999":"Telefone é obrigatório"}function be(i){return i?"":"Cargo é obrigatório"}async function en(){try{ve=!1,ae.textContent="Câmera",fe.style.display="none",await Re(),O.classList.add("show"),O.style.animation="cameraModalOpen 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94)",$("Câmera","Câmera aberta com sucesso!","success")}catch(i){console.error("Erro ao abrir câmera:",i),$("Erro","Não foi possível acessar a câmera.","error")}}async function tn(){try{ve=!0,ae.textContent="Scanner QR",fe.style.display="flex",await Re(),O.classList.add("show"),rt(),$("Scanner","Scanner QR ativado!","success")}catch(i){console.error("Erro ao abrir scanner QR:",i),$("Erro","Não foi possível acessar a câmera para scanner.","error")}}async function Re(){try{const i={video:{facingMode:X,width:{ideal:1280},height:{ideal:720}}};V=await navigator.mediaDevices.getUserMedia(i),L.srcObject=V,await new Promise(d=>{L.onloadedmetadata=d}),S.width=L.videoWidth,S.height=L.videoHeight}catch(i){throw new Error("Erro ao acessar câmera: "+i.message)}}function rt(){re&&re.destroy(),re=new k(L,i=>{nn(i.data)},{highlightScanRegion:!0,highlightCodeOutline:!0,preferredCamera:X==="user"?"front":"back"}),re.start()}function nn(i){try{const d=JSON.parse(i);d.nome&&d.email?(document.getElementById("nome").value=d.nome||"",document.getElementById("email").value=d.email||"",document.getElementById("telefone").value=d.telefone||"",document.getElementById("cargo").value=d.cargo||"",ce(),$("Sucesso","Dados do usuário carregados do QR Code!","success"),document.getElementById("userForm").scrollIntoView({behavior:"smooth",block:"start"})):$("Aviso","QR Code não contém dados de usuário válidos.","warning")}catch{$("QR Code",`Conteúdo: ${i}`,"info"),ce()}}function rn(){if(!V)return;D.style.transform="scale(0.9)",setTimeout(()=>{D.style.transform="scale(1)"},150),S.getContext("2d").drawImage(L,0,0,S.width,S.height),S.toBlob(d=>{const u=new File([d],"camera-photo.jpg",{type:"image/jpeg"}),m=new DataTransfer;m.items.add(u),T.files=m.files;const B=new FileReader;B.onload=function(N){p.innerHTML=`<img src="${N.target.result}" alt="Preview">`,p.classList.add("has-image")},B.readAsDataURL(u),ce(),$("Sucesso","Foto capturada com sucesso!","success"),on()},"image/jpeg",.9)}function on(){const i=document.createElement("div");i.style.cssText=`
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: white;
            z-index: 9999;
            pointer-events: none;
            animation: flashEffect 0.3s ease-out;
        `,document.body.appendChild(i),setTimeout(()=>{i.remove()},300)}async function an(){X=X==="user"?"environment":"user",Y.style.transform="rotateY(180deg)",setTimeout(()=>{Y.style.transform="rotateY(0deg)"},300),V&&V.getTracks().forEach(i=>i.stop());try{await Re(),ve&&rt(),$("Câmera","Câmera alternada!","success")}catch{$("Erro","Não foi possível alternar a câmera.","error")}}async function sn(){try{const i=V.getVideoTracks()[0];i.getCapabilities().torch?(ne=!ne,await i.applyConstraints({advanced:[{torch:ne}]}),te.innerHTML=`<iconify-icon icon="mdi:flash${ne?"":"-off"}"></iconify-icon>`,te.style.color=ne?"var(--warning-color)":"",$("Flash",`Flash ${ne?"ligado":"desligado"}!`,"info")):$("Aviso","Flash não disponível neste dispositivo.","warning")}catch{$("Erro","Não foi possível controlar o flash.","error")}}function cn(){T.click()}function ce(){V&&(V.getTracks().forEach(i=>i.stop()),V=null),re&&(re.destroy(),re=null),O.classList.remove("show"),fe.style.display="none",ve=!1,ne=!1,te.innerHTML='<iconify-icon icon="mdi:flash-off"></iconify-icon>',te.style.color=""}async function ln(i){const d=q.find(u=>u.id===i);if(d)try{const u={nome:d.nome,email:d.email,telefone:d.telefone,cargo:d.cargo,dataCadastro:d.dataCadastro},m=document.getElementById("qrCodeCanvas");await Kn.toCanvas(m,JSON.stringify(u),{width:256,margin:2,color:{dark:"#000000",light:"#FFFFFF"}}),document.getElementById("shareUserName").textContent=d.nome,document.getElementById("shareUserDetails").textContent=`${d.cargo} • ${d.email}`,v.dataset.userId=i,v.dataset.shareData=JSON.stringify(u),v.classList.add("show")}catch(u){console.error("Erro ao gerar QR Code:",u),$("Erro","Não foi possível gerar o QR Code.","error")}}function dn(){const i=document.getElementById("qrCodeCanvas"),d=v.dataset.userId,u=q.find(m=>m.id==d);if(i&&u){const m=document.createElement("a");m.download=`qr-${u.nome.replace(/\s+/g,"-").toLowerCase()}.png`,m.href=i.toDataURL(),m.click(),$("Sucesso","QR Code baixado com sucesso!","success")}}async function un(){const i=document.getElementById("qrCodeCanvas"),d=v.dataset.userId,u=q.find(m=>m.id==d);if(i&&u)try{i.toBlob(async m=>{const B=new File([m],`qr-${u.nome}.png`,{type:"image/png"});if(navigator.share&&navigator.canShare({files:[B]}))await navigator.share({title:`Dados de ${u.nome}`,text:`QR Code com os dados de ${u.nome}`,files:[B]}),$("Sucesso","QR Code compartilhado!","success");else{const N=v.dataset.shareData;await navigator.clipboard.writeText(N),$("Sucesso","Dados copiados para a área de transferência!","success")}})}catch(m){console.error("Erro ao compartilhar:",m),$("Erro","Não foi possível compartilhar.","error")}}function _e(){v.classList.remove("show"),delete v.dataset.userId,delete v.dataset.shareData}function fn(){const i=localStorage.getItem("usuarios");i?q=JSON.parse(i):(q=[{id:1,nome:"Ana Silva Santos",email:"ana.santos@empresa.com",telefone:"(11) 98765-4321",cargo:"Desenvolvedor",foto:"https://images.pexels.com/photos/774909/pexels-photo-774909.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop",dataCadastro:new Date().toISOString()},{id:2,nome:"Carlos Eduardo Lima",email:"carlos.lima@empresa.com",telefone:"(21) 99876-5432",cargo:"Designer",foto:"https://images.pexels.com/photos/1222271/pexels-photo-1222271.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop",dataCadastro:new Date().toISOString()},{id:3,nome:"Mariana Costa Oliveira",email:"mariana.oliveira@empresa.com",telefone:"(31) 97654-3210",cargo:"Gerente",foto:"https://images.pexels.com/photos/1239291/pexels-photo-1239291.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop",dataCadastro:new Date().toISOString()}],we())}function we(){localStorage.setItem("usuarios",JSON.stringify(q)),Me()}function Me(){const i=new Date().toDateString(),d=q.filter(u=>new Date(u.dataCadastro).toDateString()===i).length;Pe(F,q.length),Pe(I,d),Pe(A,W.length)}function Pe(i,d){const u=parseInt(i.textContent)||0;if(u===d)return;const m=500,B=20,N=(d-u)/B;let x=u,de=0;const De=setInterval(()=>{de++,x+=N,de>=B?(i.textContent=d,clearInterval(De)):i.textContent=Math.round(x)},m/B)}function Z(){let i=[...q];H&&(i=i.filter(u=>u.nome.toLowerCase().includes(H.toLowerCase())||u.email.toLowerCase().includes(H.toLowerCase())||u.cargo.toLowerCase().includes(H.toLowerCase()))),j&&(i=i.filter(u=>u.cargo===j)),i.sort((u,m)=>{switch(he){case"nome":return u.nome.localeCompare(m.nome);case"email":return u.email.localeCompare(m.email);case"cargo":return u.cargo.localeCompare(m.cargo);case"data":return new Date(m.dataCadastro)-new Date(u.dataCadastro);default:return 0}}),W=i,Me();const d=Ce();U>d&&d>0?U=d:U<1&&(U=1)}function z(){if(e.innerHTML="",e.className=G==="grid"?"usuarios-grid":"usuarios-list",W.length===0){_.style.display="block";return}_.style.display="none";const i=(U-1)*se;W.slice(i,i+se).forEach((u,m)=>{const B=document.createElement("div");B.className=`usuario-card ${G==="list"?"list-view":""}`,B.style.animationDelay=`${m*.1}s`;const N=new Date(u.dataCadastro).toLocaleDateString("pt-BR");B.innerHTML=`
                <img src="${u.foto}" alt="Foto de ${u.nome}" 
                     onerror="this.src='https://images.pexels.com/photos/1300402/pexels-photo-1300402.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop'">
                <div class="usuario-info">
                    <h3>${u.nome}</h3>
                    <p><iconify-icon icon="mdi:email"></iconify-icon> ${u.email}</p>
                    <p><iconify-icon icon="mdi:phone"></iconify-icon> ${u.telefone}</p>
                    <p><iconify-icon icon="mdi:calendar"></iconify-icon> Cadastrado em ${N}</p>
                    <span class="cargo">${u.cargo}</span>
                </div>
                <div class="usuario-actions">
                    <button class="action-btn edit-btn" data-user-id="${u.id}">
                        <iconify-icon icon="mdi:pencil"></iconify-icon> Editar
                    </button>
                    <button class="action-btn share-btn" data-user-id="${u.id}">
                        <iconify-icon icon="mdi:share"></iconify-icon> Compartilhar
                    </button>
                    <button class="action-btn remove-btn" data-user-id="${u.id}">
                        <iconify-icon icon="mdi:delete"></iconify-icon> Remover
                    </button>
                </div>
            `,e.appendChild(B)}),document.querySelectorAll(".edit-btn").forEach(u=>{u.addEventListener("click",m=>{const B=parseInt(m.currentTarget.dataset.userId);Bn(B)})}),document.querySelectorAll(".share-btn").forEach(u=>{u.addEventListener("click",m=>{const B=parseInt(m.currentTarget.dataset.userId);ln(B)})}),document.querySelectorAll(".remove-btn").forEach(u=>{u.addEventListener("click",m=>{const B=parseInt(m.currentTarget.dataset.userId);En(B)})}),document.querySelectorAll(".usuario-card").forEach(u=>{u.addEventListener("mouseenter",()=>{u.style.transform=G==="grid"?"translateY(-8px) scale(1.02)":"translateX(8px)"}),u.addEventListener("mouseleave",()=>{u.style.transform="none"})})}function K(){const i=Ce();if(g.disabled=U===1,w.disabled=U===1,f.disabled=U===i||i===0,y.disabled=U===i||i===0,b.innerHTML="",i<=7)for(let d=1;d<=i;d++)Ee(d);else{Ee(1),U>4&&ot();const d=Math.max(2,U-2),u=Math.min(i-1,U+2);for(let m=d;m<=u;m++)Ee(m);U<i-3&&ot(),i>1&&Ee(i)}P.textContent=i>0?`Página ${U} de ${i}`:"Nenhum resultado"}function Ee(i){const d=document.createElement("button");d.textContent=i,d.className=U===i?"active":"",d.addEventListener("click",()=>le(i)),b.appendChild(d)}function ot(){const i=document.createElement("span");i.textContent="...",i.style.padding="8px",i.style.color="var(--text-secondary)",b.appendChild(i)}function Ce(){return Math.ceil(W.length/se)}function le(i){const d=Ce();i>=1&&i<=d&&(U=i,z(),K(),e.scrollIntoView({behavior:"smooth",block:"start"}))}function hn(i){var N;i.preventDefault();const d={nome:document.getElementById("nome").value.trim(),email:document.getElementById("email").value.trim(),telefone:document.getElementById("telefone").value.trim(),cargo:document.getElementById("cargo").value,foto:(N=T.files)==null?void 0:N[0]},u={nome:Ie(d.nome),email:Le(d.email),telefone:Te(d.telefone),cargo:be(d.cargo)};if(Object.keys(u).forEach(x=>{const de=document.getElementById(`${x}Error`),De=document.getElementById(x);Se(de,u[x],De)}),Object.values(u).some(x=>x)){$("Erro","Por favor, corrija os erros no formulário.","error");return}const m=i.target.querySelector('button[type="submit"]'),B=m.innerHTML;if(m.innerHTML='<iconify-icon icon="mdi:loading" class="animate-spin"></iconify-icon> Salvando...',m.disabled=!0,d.foto){const x=new FileReader;x.onload=function(de){setTimeout(()=>{it({...d,foto:de.target.result}),m.innerHTML=B,m.disabled=!1},1e3)},x.readAsDataURL(d.foto)}else setTimeout(()=>{it({...d,foto:"https://images.pexels.com/photos/1300402/pexels-photo-1300402.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop"}),m.innerHTML=B,m.disabled=!1},1e3)}function it(i){const d={id:Date.now(),...i,dataCadastro:new Date().toISOString()};q.unshift(d),we(),Z(),z(),K(),at(),$("Sucesso","Usuário cadastrado com sucesso!","success"),le(1),mn()}function mn(){const i=["#007AFF","#34C759","#FF9500","#FF3B30"];for(let u=0;u<50;u++){const m=document.createElement("div");m.style.cssText=`
                position: fixed;
                width: 10px;
                height: 10px;
                background: ${i[Math.floor(Math.random()*i.length)]};
                left: ${Math.random()*100}vw;
                top: -10px;
                border-radius: 50%;
                pointer-events: none;
                z-index: 9999;
                animation: confetti-fall ${2+Math.random()*3}s linear forwards;
            `,document.body.appendChild(m),setTimeout(()=>{m.remove()},5e3)}}function at(){s.reset(),p.style.transform="scale(0.9)",p.style.opacity="0.5",setTimeout(()=>{p.innerHTML=`
                <iconify-icon icon="mdi:camera-plus"></iconify-icon>
                <span>Clique para adicionar foto</span>
            `,p.classList.remove("has-image"),p.style.transform="scale(1)",p.style.opacity="1"},200),document.querySelectorAll(".error-message").forEach(i=>{i.textContent=""}),document.querySelectorAll("input, select").forEach(i=>{i.style.borderColor="",i.style.boxShadow=""})}function gn(i){const d=i.target.files[0];if(d){if(d.size>5*1024*1024){$("Erro","Arquivo muito grande. Máximo 5MB.","error"),i.target.value="";return}if(!d.type.startsWith("image/")){$("Erro","Por favor, selecione apenas imagens.","error"),i.target.value="";return}p.innerHTML=`
                <iconify-icon icon="mdi:loading" class="animate-spin"></iconify-icon>
                <span>Carregando...</span>
            `;const u=new FileReader;u.onload=function(m){setTimeout(()=>{p.innerHTML=`<img src="${m.target.result}" alt="Preview">`,p.classList.add("has-image")},500)},u.readAsDataURL(d)}}function yn(i){H=i.target.value.trim(),r.classList.toggle("show",H.length>0),U=1,Z(),z(),K(),H?n.style.background="rgba(0, 122, 255, 0.05)":n.style.background=""}function st(){n.value="",H="",r.classList.remove("show"),n.style.background="",U=1,Z(),z(),K(),n.style.transform="scale(1.05)",setTimeout(()=>{n.style.transform="scale(1)"},150)}function pn(i){j=i.target.value,U=1,Z(),z(),K(),i.target.style.transform="scale(1.02)",setTimeout(()=>{i.target.style.transform="scale(1)"},150)}function vn(i){he=i.target.value,Z(),z(),K(),i.target.style.transform="scale(1.02)",setTimeout(()=>{i.target.style.transform="scale(1)"},150)}function ct(i){G=i,c.classList.toggle("active",i==="grid"),l.classList.toggle("active",i==="list"),e.style.opacity="0",e.style.transform="scale(0.95)",setTimeout(()=>{z(),e.style.opacity="1",e.style.transform="scale(1)"},200)}function wn(i){se=parseInt(i.target.value),U=1,z(),K(),i.target.style.transform="scale(1.05)",setTimeout(()=>{i.target.style.transform="scale(1)"},150)}function En(i){const d=q.find(u=>u.id===i);d&&(document.getElementById("modalTitle").textContent="Confirmar Remoção",document.getElementById("modalMessage").textContent=`Tem certeza que deseja remover "${d.nome}"? Esta ação não pode ser desfeita.`,E.classList.add("show"),E.dataset.userId=i,E.dataset.action="remove")}function Cn(){const i=E.dataset.action,d=parseInt(E.dataset.userId);i==="remove"&&(q=q.filter(u=>u.id!==d),we(),Z(),z(),K(),$("Sucesso","Usuário removido com sucesso!","success")),me()}function me(){E.classList.remove("show"),delete E.dataset.userId,delete E.dataset.action}function Bn(i){const d=q.find(u=>u.id===i);d&&(document.getElementById("editUserId").value=d.id,document.getElementById("editNome").value=d.nome,document.getElementById("editEmail").value=d.email,document.getElementById("editTelefone").value=d.telefone,document.getElementById("editCargo").value=d.cargo,C.classList.add("show"))}function Sn(){const i=parseInt(document.getElementById("editUserId").value),d={nome:document.getElementById("editNome").value.trim(),email:document.getElementById("editEmail").value.trim(),telefone:document.getElementById("editTelefone").value.trim(),cargo:document.getElementById("editCargo").value},u={nome:Ie(d.nome),email:Le(d.email),telefone:Te(d.telefone),cargo:be(d.cargo)};if(Object.values(u).some(N=>N)){$("Erro","Por favor, corrija os erros no formulário.","error");return}const m=document.getElementById("editModalSave"),B=m.innerHTML;m.innerHTML='<iconify-icon icon="mdi:loading" class="animate-spin"></iconify-icon> Salvando...',m.disabled=!0,setTimeout(()=>{const N=q.findIndex(x=>x.id===i);N!==-1&&(q[N]={...q[N],...d},we(),Z(),z(),K(),$("Sucesso","Usuário atualizado com sucesso!","success"),ge()),m.innerHTML=B,m.disabled=!1},1e3)}function ge(){C.classList.remove("show")}function In(){if(W.length===0){$("Aviso","Não há dados para exportar.","warning");return}a.innerHTML='<iconify-icon icon="mdi:loading" class="animate-spin"></iconify-icon> Exportando...',a.disabled=!0,setTimeout(()=>{const i=[["Nome","Email","Telefone","Cargo","Data de Cadastro"],...W.map(B=>[B.nome,B.email,B.telefone,B.cargo,new Date(B.dataCadastro).toLocaleDateString("pt-BR")])].map(B=>B.map(N=>`"${N}"`).join(",")).join(`
`),d=new Blob([i],{type:"text/csv;charset=utf-8;"}),u=document.createElement("a"),m=URL.createObjectURL(d);u.setAttribute("href",m),u.setAttribute("download",`usuarios_${new Date().toISOString().split("T")[0]}.csv`),u.style.visibility="hidden",document.body.appendChild(u),u.click(),document.body.removeChild(u),$("Sucesso","Dados exportados com sucesso!","success"),a.innerHTML='<iconify-icon icon="mdi:download"></iconify-icon> Exportar',a.disabled=!1},1500)}function $(i,d,u="info"){const m=document.getElementById("toastContainer"),B=document.createElement("div");B.className=`toast ${u}`;const N={success:"mdi:check-circle",error:"mdi:alert-circle",warning:"mdi:alert",info:"mdi:information"};B.innerHTML=`
            <iconify-icon icon="${N[u]||N.info}"></iconify-icon>
            <div class="toast-content">
                <div class="toast-title">${i}</div>
                <div class="toast-message">${d}</div>
            </div>
            <button class="toast-close">
                <iconify-icon icon="mdi:close"></iconify-icon>
            </button>
        `,B.querySelector(".toast-close").addEventListener("click",()=>{B.style.animation="toastSlideOut 0.3s ease forwards",setTimeout(()=>{B.remove()},300)}),m.appendChild(B),setTimeout(()=>{B.parentNode&&(B.style.animation="toastSlideOut 0.3s ease forwards",setTimeout(()=>{B.remove()},300))},5e3)}const lt=document.createElement("style");lt.textContent=`
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }
        
        @keyframes ripple {
            to {
                transform: scale(2);
                opacity: 0;
            }
        }
        
        @keyframes confetti-fall {
            to {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }
        
        @keyframes toastSlideOut {
            to {
                opacity: 0;
                transform: translateX(100%) scale(0.9);
            }
        }
        
        @keyframes flashEffect {
            0% { opacity: 1; }
            50% { opacity: 0.8; }
            100% { opacity: 0; }
        }
        
        @keyframes cameraModalOpen {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }
        
        @keyframes qrScan {
            0%, 100% { transform: translateY(-50%); opacity: 1; }
            50% { transform: translateY(50%); opacity: 0.5; }
        }
        
        .animate-spin {
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
    `,document.head.appendChild(lt)});
