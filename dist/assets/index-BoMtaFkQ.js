(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function r(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(t){if(t.ep)return;t.ep=!0;const n=r(t);fetch(t.href,n)}})();class st{constructor(){this.dbName="UserSystemDB",this.version=1,this.db=null,this.init()}async init(){return new Promise((e,r)=>{const o=indexedDB.open(this.dbName,this.version);o.onerror=()=>r(o.error),o.onsuccess=()=>{this.db=o.result,e(this.db)},o.onupgradeneeded=t=>{const n=t.target.result;if(!n.objectStoreNames.contains("users")){const s=n.createObjectStore("users",{keyPath:"id",autoIncrement:!0});s.createIndex("email","email",{unique:!0}),s.createIndex("nome","nome",{unique:!1}),s.createIndex("cargo","cargo",{unique:!1}),s.createIndex("dataRegistro","dataRegistro",{unique:!1})}}})}async addUser(e){return new Promise((r,o)=>{const n=this.db.transaction(["users"],"readwrite").objectStore("users"),s={...e,dataRegistro:new Date().toISOString(),id:Date.now()+Math.random()},i=n.add(s);i.onsuccess=()=>r(s),i.onerror=()=>o(i.error)})}async getAllUsers(){return new Promise((e,r)=>{const n=this.db.transaction(["users"],"readonly").objectStore("users").getAll();n.onsuccess=()=>e(n.result),n.onerror=()=>r(n.error)})}async updateUser(e,r){return new Promise((o,t)=>{const s=this.db.transaction(["users"],"readwrite").objectStore("users"),i=s.get(e);i.onsuccess=()=>{const c=i.result;if(c){Object.assign(c,r);const l=s.put(c);l.onsuccess=()=>o(c),l.onerror=()=>t(l.error)}else t(new Error("User not found"))}})}async deleteUser(e){return new Promise((r,o)=>{const s=this.db.transaction(["users"],"readwrite").objectStore("users").delete(e);s.onsuccess=()=>r(!0),s.onerror=()=>o(s.error)})}async searchUsers(e){const r=await this.getAllUsers(),o=e.toLowerCase();return r.filter(t=>t.nome.toLowerCase().includes(o)||t.email.toLowerCase().includes(o)||t.cargo.toLowerCase().includes(o)||t.telefone.includes(o))}async populateInitialData(){if((await this.getAllUsers()).length>0)return;const r=[{nome:"Ana Silva Santos",email:"ana.silva@empresa.com",telefone:"(11) 99876-5432",cargo:"Desenvolvedor",foto:"https://images.pexels.com/photos/774909/pexels-photo-774909.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop"},{nome:"Carlos Eduardo Lima",email:"carlos.lima@empresa.com",telefone:"(11) 98765-4321",cargo:"Designer",foto:"https://images.pexels.com/photos/1222271/pexels-photo-1222271.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop"},{nome:"Mariana Costa Oliveira",email:"mariana.costa@empresa.com",telefone:"(11) 97654-3210",cargo:"Gerente",foto:"https://images.pexels.com/photos/1239291/pexels-photo-1239291.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop"},{nome:"João Pedro Almeida",email:"joao.almeida@empresa.com",telefone:"(11) 96543-2109",cargo:"Analista",foto:"https://images.pexels.com/photos/1681010/pexels-photo-1681010.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop"},{nome:"Fernanda Rodrigues",email:"fernanda.rodrigues@empresa.com",telefone:"(11) 95432-1098",cargo:"Coordenador",foto:"https://images.pexels.com/photos/1130626/pexels-photo-1130626.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop"},{nome:"Rafael Santos Pereira",email:"rafael.pereira@empresa.com",telefone:"(11) 94321-0987",cargo:"Desenvolvedor",foto:"https://images.pexels.com/photos/1043471/pexels-photo-1043471.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop"},{nome:"Juliana Mendes Silva",email:"juliana.mendes@empresa.com",telefone:"(11) 93210-9876",cargo:"Designer",foto:"https://images.pexels.com/photos/1036623/pexels-photo-1036623.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop"},{nome:"Bruno Ferreira Costa",email:"bruno.ferreira@empresa.com",telefone:"(11) 92109-8765",cargo:"Diretor",foto:"https://images.pexels.com/photos/1212984/pexels-photo-1212984.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop"},{nome:"Camila Souza Lima",email:"camila.souza@empresa.com",telefone:"(11) 91098-7654",cargo:"Estagiário",foto:"https://images.pexels.com/photos/1181686/pexels-photo-1181686.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop"},{nome:"Diego Martins Oliveira",email:"diego.martins@empresa.com",telefone:"(11) 90987-6543",cargo:"Desenvolvedor",foto:"https://images.pexels.com/photos/1040880/pexels-photo-1040880.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop"},{nome:"Larissa Barbosa Santos",email:"larissa.barbosa@empresa.com",telefone:"(11) 89876-5432",cargo:"Analista",foto:"https://images.pexels.com/photos/1181424/pexels-photo-1181424.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop"},{nome:"Thiago Ribeiro Silva",email:"thiago.ribeiro@empresa.com",telefone:"(11) 88765-4321",cargo:"Gerente",foto:"https://images.pexels.com/photos/1043474/pexels-photo-1043474.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop"},{nome:"Patrícia Gomes Alves",email:"patricia.gomes@empresa.com",telefone:"(11) 87654-3210",cargo:"Designer",foto:"https://images.pexels.com/photos/1181690/pexels-photo-1181690.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop"},{nome:"Rodrigo Carvalho Lima",email:"rodrigo.carvalho@empresa.com",telefone:"(11) 86543-2109",cargo:"Coordenador",foto:"https://images.pexels.com/photos/1040881/pexels-photo-1040881.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop"},{nome:"Vanessa Torres Costa",email:"vanessa.torres@empresa.com",telefone:"(11) 85432-1098",cargo:"Desenvolvedor",foto:"https://images.pexels.com/photos/1181519/pexels-photo-1181519.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop"},{nome:"Lucas Andrade Pereira",email:"lucas.andrade@empresa.com",telefone:"(11) 84321-0987",cargo:"Estagiário",foto:"https://images.pexels.com/photos/1043473/pexels-photo-1043473.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop"},{nome:"Gabriela Nascimento",email:"gabriela.nascimento@empresa.com",telefone:"(11) 83210-9876",cargo:"Analista",foto:"https://images.pexels.com/photos/1181717/pexels-photo-1181717.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop"},{nome:"Felipe Moreira Santos",email:"felipe.moreira@empresa.com",telefone:"(11) 82109-8765",cargo:"Diretor",foto:"https://images.pexels.com/photos/1040882/pexels-photo-1040882.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop"},{nome:"Amanda Vieira Silva",email:"amanda.vieira@empresa.com",telefone:"(11) 81098-7654",cargo:"Designer",foto:"https://images.pexels.com/photos/1181562/pexels-photo-1181562.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop"},{nome:"Gustavo Fernandes Lima",email:"gustavo.fernandes@empresa.com",telefone:"(11) 80987-6543",cargo:"Desenvolvedor",foto:"https://images.pexels.com/photos/1043472/pexels-photo-1043472.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop"},{nome:"Isabela Cardoso Oliveira",email:"isabela.cardoso@empresa.com",telefone:"(11) 79876-5432",cargo:"Gerente",foto:"https://images.pexels.com/photos/1181721/pexels-photo-1181721.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop"},{nome:"Mateus Rocha Santos",email:"mateus.rocha@empresa.com",telefone:"(11) 78765-4321",cargo:"Coordenador",foto:"https://images.pexels.com/photos/1040883/pexels-photo-1040883.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop"},{nome:"Natália Campos Silva",email:"natalia.campos@empresa.com",telefone:"(11) 77654-3210",cargo:"Analista",foto:"https://images.pexels.com/photos/1181725/pexels-photo-1181725.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop"},{nome:"Pedro Henrique Costa",email:"pedro.costa@empresa.com",telefone:"(11) 76543-2109",cargo:"Desenvolvedor",foto:"https://images.pexels.com/photos/1040884/pexels-photo-1040884.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop"},{nome:"Renata Lopes Almeida",email:"renata.lopes@empresa.com",telefone:"(11) 75432-1098",cargo:"Designer",foto:"https://images.pexels.com/photos/1181729/pexels-photo-1181729.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop"},{nome:"Vinicius Dias Pereira",email:"vinicius.dias@empresa.com",telefone:"(11) 74321-0987",cargo:"Estagiário",foto:"https://images.pexels.com/photos/1040885/pexels-photo-1040885.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop"},{nome:"Beatriz Monteiro Silva",email:"beatriz.monteiro@empresa.com",telefone:"(11) 73210-9876",cargo:"Diretor",foto:"https://images.pexels.com/photos/1181733/pexels-photo-1181733.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop"},{nome:"Eduardo Pinto Santos",email:"eduardo.pinto@empresa.com",telefone:"(11) 72109-8765",cargo:"Gerente",foto:"https://images.pexels.com/photos/1040886/pexels-photo-1040886.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop"},{nome:"Letícia Freitas Lima",email:"leticia.freitas@empresa.com",telefone:"(11) 71098-7654",cargo:"Analista",foto:"https://images.pexels.com/photos/1181737/pexels-photo-1181737.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop"},{nome:"Ricardo Teixeira Costa",email:"ricardo.teixeira@empresa.com",telefone:"(11) 70987-6543",cargo:"Desenvolvedor",foto:"https://images.pexels.com/photos/1040887/pexels-photo-1040887.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop"},{nome:"Sophia Ramos Oliveira",email:"sophia.ramos@empresa.com",telefone:"(11) 69876-5432",cargo:"Coordenador",foto:"https://images.pexels.com/photos/1181741/pexels-photo-1181741.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop"},{nome:"André Cunha Silva",email:"andre.cunha@empresa.com",telefone:"(11) 68765-4321",cargo:"Designer",foto:"https://images.pexels.com/photos/1040888/pexels-photo-1040888.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop"},{nome:"Carolina Melo Santos",email:"carolina.melo@empresa.com",telefone:"(11) 67654-3210",cargo:"Estagiário",foto:"https://images.pexels.com/photos/1181745/pexels-photo-1181745.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop"},{nome:"Henrique Azevedo Lima",email:"henrique.azevedo@empresa.com",telefone:"(11) 66543-2109",cargo:"Desenvolvedor",foto:"https://images.pexels.com/photos/1040889/pexels-photo-1040889.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop"},{nome:"Priscila Castro Costa",email:"priscila.castro@empresa.com",telefone:"(11) 65432-1098",cargo:"Analista",foto:"https://images.pexels.com/photos/1181749/pexels-photo-1181749.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop"},{nome:"Marcelo Correia Pereira",email:"marcelo.correia@empresa.com",telefone:"(11) 64321-0987",cargo:"Diretor",foto:"https://images.pexels.com/photos/1040890/pexels-photo-1040890.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop"},{nome:"Aline Batista Silva",email:"aline.batista@empresa.com",telefone:"(11) 63210-9876",cargo:"Gerente",foto:"https://images.pexels.com/photos/1181753/pexels-photo-1181753.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop"},{nome:"Daniel Macedo Santos",email:"daniel.macedo@empresa.com",telefone:"(11) 62109-8765",cargo:"Coordenador",foto:"https://images.pexels.com/photos/1040891/pexels-photo-1040891.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop"},{nome:"Tatiana Nunes Lima",email:"tatiana.nunes@empresa.com",telefone:"(11) 61098-7654",cargo:"Designer",foto:"https://images.pexels.com/photos/1181757/pexels-photo-1181757.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop"},{nome:"Fábio Moura Costa",email:"fabio.moura@empresa.com",telefone:"(11) 60987-6543",cargo:"Desenvolvedor",foto:"https://images.pexels.com/photos/1040892/pexels-photo-1040892.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop"},{nome:"Viviane Reis Oliveira",email:"viviane.reis@empresa.com",telefone:"(11) 59876-5432",cargo:"Estagiário",foto:"https://images.pexels.com/photos/1181761/pexels-photo-1181761.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop"},{nome:"Alexandre Farias Silva",email:"alexandre.farias@empresa.com",telefone:"(11) 58765-4321",cargo:"Analista",foto:"https://images.pexels.com/photos/1040893/pexels-photo-1040893.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop"},{nome:"Cristina Borges Santos",email:"cristina.borges@empresa.com",telefone:"(11) 57654-3210",cargo:"Diretor",foto:"https://images.pexels.com/photos/1181765/pexels-photo-1181765.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop"},{nome:"Roberto Siqueira Lima",email:"roberto.siqueira@empresa.com",telefone:"(11) 56543-2109",cargo:"Gerente",foto:"https://images.pexels.com/photos/1040894/pexels-photo-1040894.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop"},{nome:"Simone Vargas Costa",email:"simone.vargas@empresa.com",telefone:"(11) 55432-1098",cargo:"Coordenador",foto:"https://images.pexels.com/photos/1181769/pexels-photo-1181769.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop"},{nome:"Leandro Pacheco Pereira",email:"leandro.pacheco@empresa.com",telefone:"(11) 54321-0987",cargo:"Designer",foto:"https://images.pexels.com/photos/1040895/pexels-photo-1040895.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop"},{nome:"Mônica Tavares Silva",email:"monica.tavares@empresa.com",telefone:"(11) 53210-9876",cargo:"Desenvolvedor",foto:"https://images.pexels.com/photos/1181773/pexels-photo-1181773.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop"},{nome:"Sérgio Duarte Santos",email:"sergio.duarte@empresa.com",telefone:"(11) 52109-8765",cargo:"Estagiário",foto:"https://images.pexels.com/photos/1040896/pexels-photo-1040896.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop"},{nome:"Eliane Medeiros Lima",email:"eliane.medeiros@empresa.com",telefone:"(11) 51098-7654",cargo:"Analista",foto:"https://images.pexels.com/photos/1181777/pexels-photo-1181777.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop"},{nome:"Wagner Santana Costa",email:"wagner.santana@empresa.com",telefone:"(11) 50987-6543",cargo:"Outro",foto:"https://images.pexels.com/photos/1040897/pexels-photo-1040897.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop"}];for(const o of r)await this.addUser(o)}}const at="modulepreload",it=function(a){return"/"+a},ve={},ct=function(e,r,o){let t=Promise.resolve();if(r&&r.length>0){let s=function(l){return Promise.all(l.map(u=>Promise.resolve(u).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),c=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));t=s(r.map(l=>{if(l=it(l),l in ve)return;ve[l]=!0;const u=l.endsWith(".css"),g=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${g}`))return;const m=document.createElement("link");if(m.rel=u?"stylesheet":at,u||(m.as="script"),m.crossOrigin="",m.href=l,c&&m.setAttribute("nonce",c),document.head.appendChild(m),u)return new Promise((d,P)=>{m.addEventListener("load",d),m.addEventListener("error",()=>P(new Error(`Unable to preload CSS for ${l}`)))})}))}function n(s){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=s,window.dispatchEvent(i),!i.defaultPrevented)throw s}return t.then(s=>{for(const i of s||[])i.status==="rejected"&&n(i.reason);return e().catch(n)})};class lt{constructor(){this.stream=null,this.video=null,this.canvas=null,this.context=null,this.currentCamera="user",this.flashEnabled=!1,this.isQRMode=!1,this.qrScanner=null,this.onCaptureCallback=null,this.onQRDetectedCallback=null,this.init()}init(){var e;this.video=document.getElementById("cameraVideo"),this.canvas=document.getElementById("cameraCanvas"),this.context=(e=this.canvas)==null?void 0:e.getContext("2d"),this.setupEventListeners()}setupEventListeners(){var e,r,o,t,n,s,i;(e=document.getElementById("closeCameraBtn"))==null||e.addEventListener("click",()=>{this.closeCamera()}),(r=document.getElementById("switchCameraBtn"))==null||r.addEventListener("click",()=>{this.switchCamera()}),(o=document.getElementById("flashBtn"))==null||o.addEventListener("click",()=>{this.toggleFlash()}),(t=document.getElementById("captureBtn"))==null||t.addEventListener("click",()=>{this.capturePhoto()}),(n=document.getElementById("galleryBtn"))==null||n.addEventListener("click",()=>{this.openGallery()}),(s=document.getElementById("openCamera"))==null||s.addEventListener("click",()=>{this.openCamera("photo")}),(i=document.getElementById("scanQR"))==null||i.addEventListener("click",()=>{this.openCamera("qr")})}async openCamera(e="photo"){try{this.isQRMode=e==="qr";const r=document.getElementById("cameraTitle"),o=document.getElementById("qrOverlay");this.isQRMode?(r.textContent="Escanear QR Code",o.style.display="flex",this.startQRScanner()):(r.textContent="Câmera",o.style.display="none",this.stopQRScanner()),await this.startCamera(),document.getElementById("cameraModal").classList.add("show"),this.addCameraAnimations()}catch(r){console.error("Error opening camera:",r),this.showToast("Erro ao acessar a câmera","error")}}async startCamera(){try{this.stream&&this.stream.getTracks().forEach(r=>r.stop());const e={video:{facingMode:this.currentCamera,width:{ideal:1920},height:{ideal:1080}},audio:!1};this.stream=await navigator.mediaDevices.getUserMedia(e),this.video.srcObject=this.stream,this.video.addEventListener("loadedmetadata",()=>{this.canvas.width=this.video.videoWidth,this.canvas.height=this.video.videoHeight})}catch(e){throw new Error("Não foi possível acessar a câmera: "+e.message)}}async switchCamera(){try{this.currentCamera=this.currentCamera==="user"?"environment":"user",await this.startCamera();const e=document.getElementById("switchCameraBtn");e.style.transform="rotateY(180deg)",setTimeout(()=>{e.style.transform="rotateY(0deg)"},300)}catch(e){console.error("Error switching camera:",e),this.showToast("Erro ao trocar câmera","error")}}async toggleFlash(){try{const e=this.stream.getVideoTracks()[0];if(e.getCapabilities().torch){this.flashEnabled=!this.flashEnabled,await e.applyConstraints({advanced:[{torch:this.flashEnabled}]});const o=document.getElementById("flashBtn");o.querySelector("iconify-icon").setAttribute("icon",this.flashEnabled?"mdi:flash":"mdi:flash-off"),o.style.transform="scale(1.2)",setTimeout(()=>{o.style.transform="scale(1)"},200)}else this.showToast("Flash não disponível neste dispositivo","warning")}catch(e){console.error("Error toggling flash:",e),this.showToast("Erro ao controlar flash","error")}}capturePhoto(){if(!(!this.video||!this.canvas||!this.context))try{this.canvas.width=this.video.videoWidth,this.canvas.height=this.video.videoHeight,this.context.drawImage(this.video,0,0),this.canvas.toBlob(e=>{e&&this.onCaptureCallback&&this.onCaptureCallback(e),this.closeCamera()},"image/jpeg",.9),this.addCaptureAnimation()}catch(e){console.error("Error capturing photo:",e),this.showToast("Erro ao capturar foto","error")}}openGallery(){const e=document.createElement("input");e.type="file",e.accept="image/*",e.style.display="none",e.addEventListener("change",r=>{const o=r.target.files[0];o&&this.onCaptureCallback&&(this.onCaptureCallback(o),this.closeCamera())}),document.body.appendChild(e),e.click(),document.body.removeChild(e)}async startQRScanner(){if(this.isQRMode)try{const e=(await ct(async()=>{const{default:r}=await import("./qr-scanner.min-BjqQBhCY.js");return{default:r}},[])).default;this.qrScanner=new e(this.video,r=>{this.onQRDetectedCallback&&this.onQRDetectedCallback(r.data),this.closeCamera()},{highlightScanRegion:!0,highlightCodeOutline:!0,preferredCamera:this.currentCamera}),await this.qrScanner.start()}catch(e){console.error("Error starting QR scanner:",e),this.showToast("Erro ao iniciar scanner QR","error")}}stopQRScanner(){this.qrScanner&&(this.qrScanner.stop(),this.qrScanner.destroy(),this.qrScanner=null)}closeCamera(){this.stream&&(this.stream.getTracks().forEach(t=>t.stop()),this.stream=null),this.stopQRScanner(),document.getElementById("cameraModal").classList.remove("show"),this.flashEnabled=!1;const r=document.getElementById("flashBtn"),o=r==null?void 0:r.querySelector("iconify-icon");o&&o.setAttribute("icon","mdi:flash-off")}addCameraAnimations(){document.querySelectorAll(".camera-control-btn").forEach((o,t)=>{o.style.opacity="0",o.style.transform="scale(0.8)",setTimeout(()=>{o.style.transition="all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94)",o.style.opacity="1",o.style.transform="scale(1)"},t*100)});const r=document.getElementById("captureBtn");r&&(r.style.opacity="0",r.style.transform="scale(0.5)",setTimeout(()=>{r.style.transition="all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94)",r.style.opacity="1",r.style.transform="scale(1)"},300))}addCaptureAnimation(){const e=document.querySelector(".camera-viewport"),r=document.createElement("div");r.style.cssText=`
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: white;
      opacity: 0;
      pointer-events: none;
      z-index: 1000;
    `,e.appendChild(r),r.style.transition="opacity 0.1s ease",r.style.opacity="0.8",setTimeout(()=>{r.style.opacity="0",setTimeout(()=>{e.removeChild(r)},100)},100);const o=document.getElementById("captureBtn"),t=o.querySelector(".capture-ring"),n=o.querySelector(".capture-inner");t.style.transform="scale(1.2)",n.style.transform="scale(0.8)",setTimeout(()=>{t.style.transform="scale(1)",n.style.transform="scale(1)"},200)}showToast(e,r="info"){const o=document.createElement("div");o.className=`toast ${r}`;const t={success:"mdi:check-circle",error:"mdi:alert-circle",warning:"mdi:alert",info:"mdi:information"};o.innerHTML=`
      <iconify-icon icon="${t[r]||t.info}"></iconify-icon>
      <div class="toast-content">
        <div class="toast-title">${e}</div>
      </div>
      <button class="toast-close">
        <iconify-icon icon="mdi:close"></iconify-icon>
      </button>
    `;const n=document.getElementById("toastContainer");n.appendChild(o),setTimeout(()=>{o.style.opacity="0",o.style.transform="translateX(100%)",setTimeout(()=>{n.contains(o)&&n.removeChild(o)},300)},3e3),o.querySelector(".toast-close").addEventListener("click",()=>{o.style.opacity="0",o.style.transform="translateX(100%)",setTimeout(()=>{n.contains(o)&&n.removeChild(o)},300)})}onCapture(e){this.onCaptureCallback=e}onQRDetected(e){this.onQRDetectedCallback=e}}function ut(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var j={},J,be;function dt(){return be||(be=1,J=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),J}var G={},U={},Be;function q(){if(Be)return U;Be=1;let a;const e=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return U.getSymbolSize=function(o){if(!o)throw new Error('"version" cannot be null or undefined');if(o<1||o>40)throw new Error('"version" should be in range from 1 to 40');return o*4+17},U.getSymbolTotalCodewords=function(o){return e[o]},U.getBCHDigit=function(r){let o=0;for(;r!==0;)o++,r>>>=1;return o},U.setToSJISFunction=function(o){if(typeof o!="function")throw new Error('"toSJISFunc" is not a valid function.');a=o},U.isKanjiModeEnabled=function(){return typeof a<"u"},U.toSJIS=function(o){return a(o)},U}var Y={},Ie;function ye(){return Ie||(Ie=1,function(a){a.L={bit:1},a.M={bit:0},a.Q={bit:3},a.H={bit:2};function e(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"l":case"low":return a.L;case"m":case"medium":return a.M;case"q":case"quartile":return a.Q;case"h":case"high":return a.H;default:throw new Error("Unknown EC Level: "+r)}}a.isValid=function(o){return o&&typeof o.bit<"u"&&o.bit>=0&&o.bit<4},a.from=function(o,t){if(a.isValid(o))return o;try{return e(o)}catch{return t}}}(Y)),Y}var W,Pe;function mt(){if(Pe)return W;Pe=1;function a(){this.buffer=[],this.length=0}return a.prototype={get:function(e){const r=Math.floor(e/8);return(this.buffer[r]>>>7-e%8&1)===1},put:function(e,r){for(let o=0;o<r;o++)this.putBit((e>>>r-o-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const r=Math.floor(this.length/8);this.buffer.length<=r&&this.buffer.push(0),e&&(this.buffer[r]|=128>>>this.length%8),this.length++}},W=a,W}var X,Re;function ht(){if(Re)return X;Re=1;function a(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}return a.prototype.set=function(e,r,o,t){const n=e*this.size+r;this.data[n]=o,t&&(this.reservedBit[n]=!0)},a.prototype.get=function(e,r){return this.data[e*this.size+r]},a.prototype.xor=function(e,r,o){this.data[e*this.size+r]^=o},a.prototype.isReserved=function(e,r){return this.reservedBit[e*this.size+r]},X=a,X}var Z={},Se;function ft(){return Se||(Se=1,function(a){const e=q().getSymbolSize;a.getRowColCoords=function(o){if(o===1)return[];const t=Math.floor(o/7)+2,n=e(o),s=n===145?26:Math.ceil((n-13)/(2*t-2))*2,i=[n-7];for(let c=1;c<t-1;c++)i[c]=i[c-1]-s;return i.push(6),i.reverse()},a.getPositions=function(o){const t=[],n=a.getRowColCoords(o),s=n.length;for(let i=0;i<s;i++)for(let c=0;c<s;c++)i===0&&c===0||i===0&&c===s-1||i===s-1&&c===0||t.push([n[i],n[c]]);return t}}(Z)),Z}var ee={},Le;function gt(){if(Le)return ee;Le=1;const a=q().getSymbolSize,e=7;return ee.getPositions=function(o){const t=a(o);return[[0,0],[t-e,0],[0,t-e]]},ee}var te={},Te;function pt(){return Te||(Te=1,function(a){a.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};a.isValid=function(t){return t!=null&&t!==""&&!isNaN(t)&&t>=0&&t<=7},a.from=function(t){return a.isValid(t)?parseInt(t,10):void 0},a.getPenaltyN1=function(t){const n=t.size;let s=0,i=0,c=0,l=null,u=null;for(let g=0;g<n;g++){i=c=0,l=u=null;for(let m=0;m<n;m++){let d=t.get(g,m);d===l?i++:(i>=5&&(s+=e.N1+(i-5)),l=d,i=1),d=t.get(m,g),d===u?c++:(c>=5&&(s+=e.N1+(c-5)),u=d,c=1)}i>=5&&(s+=e.N1+(i-5)),c>=5&&(s+=e.N1+(c-5))}return s},a.getPenaltyN2=function(t){const n=t.size;let s=0;for(let i=0;i<n-1;i++)for(let c=0;c<n-1;c++){const l=t.get(i,c)+t.get(i,c+1)+t.get(i+1,c)+t.get(i+1,c+1);(l===4||l===0)&&s++}return s*e.N2},a.getPenaltyN3=function(t){const n=t.size;let s=0,i=0,c=0;for(let l=0;l<n;l++){i=c=0;for(let u=0;u<n;u++)i=i<<1&2047|t.get(l,u),u>=10&&(i===1488||i===93)&&s++,c=c<<1&2047|t.get(u,l),u>=10&&(c===1488||c===93)&&s++}return s*e.N3},a.getPenaltyN4=function(t){let n=0;const s=t.data.length;for(let c=0;c<s;c++)n+=t.data[c];return Math.abs(Math.ceil(n*100/s/5)-10)*e.N4};function r(o,t,n){switch(o){case a.Patterns.PATTERN000:return(t+n)%2===0;case a.Patterns.PATTERN001:return t%2===0;case a.Patterns.PATTERN010:return n%3===0;case a.Patterns.PATTERN011:return(t+n)%3===0;case a.Patterns.PATTERN100:return(Math.floor(t/2)+Math.floor(n/3))%2===0;case a.Patterns.PATTERN101:return t*n%2+t*n%3===0;case a.Patterns.PATTERN110:return(t*n%2+t*n%3)%2===0;case a.Patterns.PATTERN111:return(t*n%3+(t+n)%2)%2===0;default:throw new Error("bad maskPattern:"+o)}}a.applyMask=function(t,n){const s=n.size;for(let i=0;i<s;i++)for(let c=0;c<s;c++)n.isReserved(c,i)||n.xor(c,i,r(t,c,i))},a.getBestMask=function(t,n){const s=Object.keys(a.Patterns).length;let i=0,c=1/0;for(let l=0;l<s;l++){n(l),a.applyMask(l,t);const u=a.getPenaltyN1(t)+a.getPenaltyN2(t)+a.getPenaltyN3(t)+a.getPenaltyN4(t);a.applyMask(l,t),u<c&&(c=u,i=l)}return i}}(te)),te}var Q={},Me;function Xe(){if(Me)return Q;Me=1;const a=ye(),e=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],r=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return Q.getBlocksCount=function(t,n){switch(n){case a.L:return e[(t-1)*4+0];case a.M:return e[(t-1)*4+1];case a.Q:return e[(t-1)*4+2];case a.H:return e[(t-1)*4+3];default:return}},Q.getTotalCodewordsCount=function(t,n){switch(n){case a.L:return r[(t-1)*4+0];case a.M:return r[(t-1)*4+1];case a.Q:return r[(t-1)*4+2];case a.H:return r[(t-1)*4+3];default:return}},Q}var oe={},_={},Ae;function yt(){if(Ae)return _;Ae=1;const a=new Uint8Array(512),e=new Uint8Array(256);return function(){let o=1;for(let t=0;t<255;t++)a[t]=o,e[o]=t,o<<=1,o&256&&(o^=285);for(let t=255;t<512;t++)a[t]=a[t-255]}(),_.log=function(o){if(o<1)throw new Error("log("+o+")");return e[o]},_.exp=function(o){return a[o]},_.mul=function(o,t){return o===0||t===0?0:a[e[o]+e[t]]},_}var xe;function Et(){return xe||(xe=1,function(a){const e=yt();a.mul=function(o,t){const n=new Uint8Array(o.length+t.length-1);for(let s=0;s<o.length;s++)for(let i=0;i<t.length;i++)n[s+i]^=e.mul(o[s],t[i]);return n},a.mod=function(o,t){let n=new Uint8Array(o);for(;n.length-t.length>=0;){const s=n[0];for(let c=0;c<t.length;c++)n[c]^=e.mul(t[c],s);let i=0;for(;i<n.length&&n[i]===0;)i++;n=n.slice(i)}return n},a.generateECPolynomial=function(o){let t=new Uint8Array([1]);for(let n=0;n<o;n++)t=a.mul(t,new Uint8Array([1,e.exp(n)]));return t}}(oe)),oe}var re,De;function wt(){if(De)return re;De=1;const a=Et();function e(r){this.genPoly=void 0,this.degree=r,this.degree&&this.initialize(this.degree)}return e.prototype.initialize=function(o){this.degree=o,this.genPoly=a.generateECPolynomial(this.degree)},e.prototype.encode=function(o){if(!this.genPoly)throw new Error("Encoder not initialized");const t=new Uint8Array(o.length+this.degree);t.set(o);const n=a.mod(t,this.genPoly),s=this.degree-n.length;if(s>0){const i=new Uint8Array(this.degree);return i.set(n,s),i}return n},re=e,re}var ne={},se={},ae={},Ne;function Ze(){return Ne||(Ne=1,ae.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}),ae}var A={},Ue;function et(){if(Ue)return A;Ue=1;const a="[0-9]+",e="[A-Z $%*+\\-./:]+";let r="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";r=r.replace(/u/g,"\\u");const o="(?:(?![A-Z0-9 $%*+\\-./:]|"+r+`)(?:.|[\r
]))+`;A.KANJI=new RegExp(r,"g"),A.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),A.BYTE=new RegExp(o,"g"),A.NUMERIC=new RegExp(a,"g"),A.ALPHANUMERIC=new RegExp(e,"g");const t=new RegExp("^"+r+"$"),n=new RegExp("^"+a+"$"),s=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return A.testKanji=function(c){return t.test(c)},A.testNumeric=function(c){return n.test(c)},A.testAlphanumeric=function(c){return s.test(c)},A}var qe;function F(){return qe||(qe=1,function(a){const e=Ze(),r=et();a.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},a.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},a.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},a.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},a.MIXED={bit:-1},a.getCharCountIndicator=function(n,s){if(!n.ccBits)throw new Error("Invalid mode: "+n);if(!e.isValid(s))throw new Error("Invalid version: "+s);return s>=1&&s<10?n.ccBits[0]:s<27?n.ccBits[1]:n.ccBits[2]},a.getBestModeForData=function(n){return r.testNumeric(n)?a.NUMERIC:r.testAlphanumeric(n)?a.ALPHANUMERIC:r.testKanji(n)?a.KANJI:a.BYTE},a.toString=function(n){if(n&&n.id)return n.id;throw new Error("Invalid mode")},a.isValid=function(n){return n&&n.bit&&n.ccBits};function o(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"numeric":return a.NUMERIC;case"alphanumeric":return a.ALPHANUMERIC;case"kanji":return a.KANJI;case"byte":return a.BYTE;default:throw new Error("Unknown mode: "+t)}}a.from=function(n,s){if(a.isValid(n))return n;try{return o(n)}catch{return s}}}(se)),se}var Fe;function Ct(){return Fe||(Fe=1,function(a){const e=q(),r=Xe(),o=ye(),t=F(),n=Ze(),s=7973,i=e.getBCHDigit(s);function c(m,d,P){for(let S=1;S<=40;S++)if(d<=a.getCapacity(S,P,m))return S}function l(m,d){return t.getCharCountIndicator(m,d)+4}function u(m,d){let P=0;return m.forEach(function(S){const T=l(S.mode,d);P+=T+S.getBitsLength()}),P}function g(m,d){for(let P=1;P<=40;P++)if(u(m,P)<=a.getCapacity(P,d,t.MIXED))return P}a.from=function(d,P){return n.isValid(d)?parseInt(d,10):P},a.getCapacity=function(d,P,S){if(!n.isValid(d))throw new Error("Invalid QR Code version");typeof S>"u"&&(S=t.BYTE);const T=e.getSymbolTotalCodewords(d),B=r.getTotalCodewordsCount(d,P),L=(T-B)*8;if(S===t.MIXED)return L;const I=L-l(S,d);switch(S){case t.NUMERIC:return Math.floor(I/10*3);case t.ALPHANUMERIC:return Math.floor(I/11*2);case t.KANJI:return Math.floor(I/13);case t.BYTE:default:return Math.floor(I/8)}},a.getBestVersionForData=function(d,P){let S;const T=o.from(P,o.M);if(Array.isArray(d)){if(d.length>1)return g(d,T);if(d.length===0)return 1;S=d[0]}else S=d;return c(S.mode,S.getLength(),T)},a.getEncodedBits=function(d){if(!n.isValid(d)||d<7)throw new Error("Invalid QR Code version");let P=d<<12;for(;e.getBCHDigit(P)-i>=0;)P^=s<<e.getBCHDigit(P)-i;return d<<12|P}}(ne)),ne}var ie={},ke;function vt(){if(ke)return ie;ke=1;const a=q(),e=1335,r=21522,o=a.getBCHDigit(e);return ie.getEncodedBits=function(n,s){const i=n.bit<<3|s;let c=i<<10;for(;a.getBCHDigit(c)-o>=0;)c^=e<<a.getBCHDigit(c)-o;return(i<<10|c)^r},ie}var ce={},le,je;function bt(){if(je)return le;je=1;const a=F();function e(r){this.mode=a.NUMERIC,this.data=r.toString()}return e.getBitsLength=function(o){return 10*Math.floor(o/3)+(o%3?o%3*3+1:0)},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(o){let t,n,s;for(t=0;t+3<=this.data.length;t+=3)n=this.data.substr(t,3),s=parseInt(n,10),o.put(s,10);const i=this.data.length-t;i>0&&(n=this.data.substr(t),s=parseInt(n,10),o.put(s,i*3+1))},le=e,le}var ue,ze;function Bt(){if(ze)return ue;ze=1;const a=F(),e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function r(o){this.mode=a.ALPHANUMERIC,this.data=o}return r.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(t){let n;for(n=0;n+2<=this.data.length;n+=2){let s=e.indexOf(this.data[n])*45;s+=e.indexOf(this.data[n+1]),t.put(s,11)}this.data.length%2&&t.put(e.indexOf(this.data[n]),6)},ue=r,ue}var de,_e;function It(){if(_e)return de;_e=1;const a=F();function e(r){this.mode=a.BYTE,typeof r=="string"?this.data=new TextEncoder().encode(r):this.data=new Uint8Array(r)}return e.getBitsLength=function(o){return o*8},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(r){for(let o=0,t=this.data.length;o<t;o++)r.put(this.data[o],8)},de=e,de}var me,Ve;function Pt(){if(Ve)return me;Ve=1;const a=F(),e=q();function r(o){this.mode=a.KANJI,this.data=o}return r.getBitsLength=function(t){return t*13},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(o){let t;for(t=0;t<this.data.length;t++){let n=e.toSJIS(this.data[t]);if(n>=33088&&n<=40956)n-=33088;else if(n>=57408&&n<=60351)n-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);n=(n>>>8&255)*192+(n&255),o.put(n,13)}},me=r,me}var he={exports:{}},Qe;function Rt(){return Qe||(Qe=1,function(a){var e={single_source_shortest_paths:function(r,o,t){var n={},s={};s[o]=0;var i=e.PriorityQueue.make();i.push(o,0);for(var c,l,u,g,m,d,P,S,T;!i.empty();){c=i.pop(),l=c.value,g=c.cost,m=r[l]||{};for(u in m)m.hasOwnProperty(u)&&(d=m[u],P=g+d,S=s[u],T=typeof s[u]>"u",(T||S>P)&&(s[u]=P,i.push(u,P),n[u]=l))}if(typeof t<"u"&&typeof s[t]>"u"){var B=["Could not find a path from ",o," to ",t,"."].join("");throw new Error(B)}return n},extract_shortest_path_from_predecessor_list:function(r,o){for(var t=[],n=o;n;)t.push(n),r[n],n=r[n];return t.reverse(),t},find_path:function(r,o,t){var n=e.single_source_shortest_paths(r,o,t);return e.extract_shortest_path_from_predecessor_list(n,t)},PriorityQueue:{make:function(r){var o=e.PriorityQueue,t={},n;r=r||{};for(n in o)o.hasOwnProperty(n)&&(t[n]=o[n]);return t.queue=[],t.sorter=r.sorter||o.default_sorter,t},default_sorter:function(r,o){return r.cost-o.cost},push:function(r,o){var t={value:r,cost:o};this.queue.push(t),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};a.exports=e}(he)),he.exports}var Oe;function St(){return Oe||(Oe=1,function(a){const e=F(),r=bt(),o=Bt(),t=It(),n=Pt(),s=et(),i=q(),c=Rt();function l(B){return unescape(encodeURIComponent(B)).length}function u(B,L,I){const v=[];let M;for(;(M=B.exec(I))!==null;)v.push({data:M[0],index:M.index,mode:L,length:M[0].length});return v}function g(B){const L=u(s.NUMERIC,e.NUMERIC,B),I=u(s.ALPHANUMERIC,e.ALPHANUMERIC,B);let v,M;return i.isKanjiModeEnabled()?(v=u(s.BYTE,e.BYTE,B),M=u(s.KANJI,e.KANJI,B)):(v=u(s.BYTE_KANJI,e.BYTE,B),M=[]),L.concat(I,v,M).sort(function(w,E){return w.index-E.index}).map(function(w){return{data:w.data,mode:w.mode,length:w.length}})}function m(B,L){switch(L){case e.NUMERIC:return r.getBitsLength(B);case e.ALPHANUMERIC:return o.getBitsLength(B);case e.KANJI:return n.getBitsLength(B);case e.BYTE:return t.getBitsLength(B)}}function d(B){return B.reduce(function(L,I){const v=L.length-1>=0?L[L.length-1]:null;return v&&v.mode===I.mode?(L[L.length-1].data+=I.data,L):(L.push(I),L)},[])}function P(B){const L=[];for(let I=0;I<B.length;I++){const v=B[I];switch(v.mode){case e.NUMERIC:L.push([v,{data:v.data,mode:e.ALPHANUMERIC,length:v.length},{data:v.data,mode:e.BYTE,length:v.length}]);break;case e.ALPHANUMERIC:L.push([v,{data:v.data,mode:e.BYTE,length:v.length}]);break;case e.KANJI:L.push([v,{data:v.data,mode:e.BYTE,length:l(v.data)}]);break;case e.BYTE:L.push([{data:v.data,mode:e.BYTE,length:l(v.data)}])}}return L}function S(B,L){const I={},v={start:{}};let M=["start"];for(let f=0;f<B.length;f++){const w=B[f],E=[];for(let h=0;h<w.length;h++){const b=w[h],p=""+f+h;E.push(p),I[p]={node:b,lastCount:0},v[p]={};for(let C=0;C<M.length;C++){const y=M[C];I[y]&&I[y].node.mode===b.mode?(v[y][p]=m(I[y].lastCount+b.length,b.mode)-m(I[y].lastCount,b.mode),I[y].lastCount+=b.length):(I[y]&&(I[y].lastCount=b.length),v[y][p]=m(b.length,b.mode)+4+e.getCharCountIndicator(b.mode,L))}}M=E}for(let f=0;f<M.length;f++)v[M[f]].end=0;return{map:v,table:I}}function T(B,L){let I;const v=e.getBestModeForData(B);if(I=e.from(L,v),I!==e.BYTE&&I.bit<v.bit)throw new Error('"'+B+'" cannot be encoded with mode '+e.toString(I)+`.
 Suggested mode is: `+e.toString(v));switch(I===e.KANJI&&!i.isKanjiModeEnabled()&&(I=e.BYTE),I){case e.NUMERIC:return new r(B);case e.ALPHANUMERIC:return new o(B);case e.KANJI:return new n(B);case e.BYTE:return new t(B)}}a.fromArray=function(L){return L.reduce(function(I,v){return typeof v=="string"?I.push(T(v,null)):v.data&&I.push(T(v.data,v.mode)),I},[])},a.fromString=function(L,I){const v=g(L,i.isKanjiModeEnabled()),M=P(v),f=S(M,I),w=c.find_path(f.map,"start","end"),E=[];for(let h=1;h<w.length-1;h++)E.push(f.table[w[h]].node);return a.fromArray(d(E))},a.rawSplit=function(L){return a.fromArray(g(L,i.isKanjiModeEnabled()))}}(ce)),ce}var $e;function Lt(){if($e)return G;$e=1;const a=q(),e=ye(),r=mt(),o=ht(),t=ft(),n=gt(),s=pt(),i=Xe(),c=wt(),l=Ct(),u=vt(),g=F(),m=St();function d(f,w){const E=f.size,h=n.getPositions(w);for(let b=0;b<h.length;b++){const p=h[b][0],C=h[b][1];for(let y=-1;y<=7;y++)if(!(p+y<=-1||E<=p+y))for(let R=-1;R<=7;R++)C+R<=-1||E<=C+R||(y>=0&&y<=6&&(R===0||R===6)||R>=0&&R<=6&&(y===0||y===6)||y>=2&&y<=4&&R>=2&&R<=4?f.set(p+y,C+R,!0,!0):f.set(p+y,C+R,!1,!0))}}function P(f){const w=f.size;for(let E=8;E<w-8;E++){const h=E%2===0;f.set(E,6,h,!0),f.set(6,E,h,!0)}}function S(f,w){const E=t.getPositions(w);for(let h=0;h<E.length;h++){const b=E[h][0],p=E[h][1];for(let C=-2;C<=2;C++)for(let y=-2;y<=2;y++)C===-2||C===2||y===-2||y===2||C===0&&y===0?f.set(b+C,p+y,!0,!0):f.set(b+C,p+y,!1,!0)}}function T(f,w){const E=f.size,h=l.getEncodedBits(w);let b,p,C;for(let y=0;y<18;y++)b=Math.floor(y/3),p=y%3+E-8-3,C=(h>>y&1)===1,f.set(b,p,C,!0),f.set(p,b,C,!0)}function B(f,w,E){const h=f.size,b=u.getEncodedBits(w,E);let p,C;for(p=0;p<15;p++)C=(b>>p&1)===1,p<6?f.set(p,8,C,!0):p<8?f.set(p+1,8,C,!0):f.set(h-15+p,8,C,!0),p<8?f.set(8,h-p-1,C,!0):p<9?f.set(8,15-p-1+1,C,!0):f.set(8,15-p-1,C,!0);f.set(h-8,8,1,!0)}function L(f,w){const E=f.size;let h=-1,b=E-1,p=7,C=0;for(let y=E-1;y>0;y-=2)for(y===6&&y--;;){for(let R=0;R<2;R++)if(!f.isReserved(b,y-R)){let N=!1;C<w.length&&(N=(w[C]>>>p&1)===1),f.set(b,y-R,N),p--,p===-1&&(C++,p=7)}if(b+=h,b<0||E<=b){b-=h,h=-h;break}}}function I(f,w,E){const h=new r;E.forEach(function(R){h.put(R.mode.bit,4),h.put(R.getLength(),g.getCharCountIndicator(R.mode,f)),R.write(h)});const b=a.getSymbolTotalCodewords(f),p=i.getTotalCodewordsCount(f,w),C=(b-p)*8;for(h.getLengthInBits()+4<=C&&h.put(0,4);h.getLengthInBits()%8!==0;)h.putBit(0);const y=(C-h.getLengthInBits())/8;for(let R=0;R<y;R++)h.put(R%2?17:236,8);return v(h,f,w)}function v(f,w,E){const h=a.getSymbolTotalCodewords(w),b=i.getTotalCodewordsCount(w,E),p=h-b,C=i.getBlocksCount(w,E),y=h%C,R=C-y,N=Math.floor(h/C),z=Math.floor(p/C),ot=z+1,Ee=N-z,rt=new c(Ee);let O=0;const V=new Array(C),we=new Array(C);let $=0;const nt=new Uint8Array(f.buffer);for(let k=0;k<C;k++){const K=k<R?z:ot;V[k]=nt.slice(O,O+K),we[k]=rt.encode(V[k]),O+=K,$=Math.max($,K)}const H=new Uint8Array(h);let Ce=0,x,D;for(x=0;x<$;x++)for(D=0;D<C;D++)x<V[D].length&&(H[Ce++]=V[D][x]);for(x=0;x<Ee;x++)for(D=0;D<C;D++)H[Ce++]=we[D][x];return H}function M(f,w,E,h){let b;if(Array.isArray(f))b=m.fromArray(f);else if(typeof f=="string"){let N=w;if(!N){const z=m.rawSplit(f);N=l.getBestVersionForData(z,E)}b=m.fromString(f,N||40)}else throw new Error("Invalid data");const p=l.getBestVersionForData(b,E);if(!p)throw new Error("The amount of data is too big to be stored in a QR Code");if(!w)w=p;else if(w<p)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+p+`.
`);const C=I(w,E,b),y=a.getSymbolSize(w),R=new o(y);return d(R,w),P(R),S(R,w),B(R,E,0),w>=7&&T(R,w),L(R,C),isNaN(h)&&(h=s.getBestMask(R,B.bind(null,R,E))),s.applyMask(h,R),B(R,E,h),{modules:R,version:w,errorCorrectionLevel:E,maskPattern:h,segments:b}}return G.create=function(w,E){if(typeof w>"u"||w==="")throw new Error("No input text");let h=e.M,b,p;return typeof E<"u"&&(h=e.from(E.errorCorrectionLevel,e.M),b=l.from(E.version),p=s.from(E.maskPattern),E.toSJISFunc&&a.setToSJISFunction(E.toSJISFunc)),M(w,b,h,p)},G}var fe={},ge={},He;function tt(){return He||(He=1,function(a){function e(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");let o=r.slice().replace("#","").split("");if(o.length<3||o.length===5||o.length>8)throw new Error("Invalid hex color: "+r);(o.length===3||o.length===4)&&(o=Array.prototype.concat.apply([],o.map(function(n){return[n,n]}))),o.length===6&&o.push("F","F");const t=parseInt(o.join(""),16);return{r:t>>24&255,g:t>>16&255,b:t>>8&255,a:t&255,hex:"#"+o.slice(0,6).join("")}}a.getOptions=function(o){o||(o={}),o.color||(o.color={});const t=typeof o.margin>"u"||o.margin===null||o.margin<0?4:o.margin,n=o.width&&o.width>=21?o.width:void 0,s=o.scale||4;return{width:n,scale:n?4:s,margin:t,color:{dark:e(o.color.dark||"#000000ff"),light:e(o.color.light||"#ffffffff")},type:o.type,rendererOpts:o.rendererOpts||{}}},a.getScale=function(o,t){return t.width&&t.width>=o+t.margin*2?t.width/(o+t.margin*2):t.scale},a.getImageWidth=function(o,t){const n=a.getScale(o,t);return Math.floor((o+t.margin*2)*n)},a.qrToImageData=function(o,t,n){const s=t.modules.size,i=t.modules.data,c=a.getScale(s,n),l=Math.floor((s+n.margin*2)*c),u=n.margin*c,g=[n.color.light,n.color.dark];for(let m=0;m<l;m++)for(let d=0;d<l;d++){let P=(m*l+d)*4,S=n.color.light;if(m>=u&&d>=u&&m<l-u&&d<l-u){const T=Math.floor((m-u)/c),B=Math.floor((d-u)/c);S=g[i[T*s+B]?1:0]}o[P++]=S.r,o[P++]=S.g,o[P++]=S.b,o[P]=S.a}}}(ge)),ge}var Ke;function Tt(){return Ke||(Ke=1,function(a){const e=tt();function r(t,n,s){t.clearRect(0,0,n.width,n.height),n.style||(n.style={}),n.height=s,n.width=s,n.style.height=s+"px",n.style.width=s+"px"}function o(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}a.render=function(n,s,i){let c=i,l=s;typeof c>"u"&&(!s||!s.getContext)&&(c=s,s=void 0),s||(l=o()),c=e.getOptions(c);const u=e.getImageWidth(n.modules.size,c),g=l.getContext("2d"),m=g.createImageData(u,u);return e.qrToImageData(m.data,n,c),r(g,l,u),g.putImageData(m,0,0),l},a.renderToDataURL=function(n,s,i){let c=i;typeof c>"u"&&(!s||!s.getContext)&&(c=s,s=void 0),c||(c={});const l=a.render(n,s,c),u=c.type||"image/png",g=c.rendererOpts||{};return l.toDataURL(u,g.quality)}}(fe)),fe}var pe={},Je;function Mt(){if(Je)return pe;Je=1;const a=tt();function e(t,n){const s=t.a/255,i=n+'="'+t.hex+'"';return s<1?i+" "+n+'-opacity="'+s.toFixed(2).slice(1)+'"':i}function r(t,n,s){let i=t+n;return typeof s<"u"&&(i+=" "+s),i}function o(t,n,s){let i="",c=0,l=!1,u=0;for(let g=0;g<t.length;g++){const m=Math.floor(g%n),d=Math.floor(g/n);!m&&!l&&(l=!0),t[g]?(u++,g>0&&m>0&&t[g-1]||(i+=l?r("M",m+s,.5+d+s):r("m",c,0),c=0,l=!1),m+1<n&&t[g+1]||(i+=r("h",u),u=0)):c++}return i}return pe.render=function(n,s,i){const c=a.getOptions(s),l=n.modules.size,u=n.modules.data,g=l+c.margin*2,m=c.color.light.a?"<path "+e(c.color.light,"fill")+' d="M0 0h'+g+"v"+g+'H0z"/>':"",d="<path "+e(c.color.dark,"stroke")+' d="'+o(u,l,c.margin)+'"/>',P='viewBox="0 0 '+g+" "+g+'"',T='<svg xmlns="http://www.w3.org/2000/svg" '+(c.width?'width="'+c.width+'" height="'+c.width+'" ':"")+P+' shape-rendering="crispEdges">'+m+d+`</svg>
`;return typeof i=="function"&&i(null,T),T},pe}var Ge;function At(){if(Ge)return j;Ge=1;const a=dt(),e=Lt(),r=Tt(),o=Mt();function t(n,s,i,c,l){const u=[].slice.call(arguments,1),g=u.length,m=typeof u[g-1]=="function";if(!m&&!a())throw new Error("Callback required as last argument");if(m){if(g<2)throw new Error("Too few arguments provided");g===2?(l=i,i=s,s=c=void 0):g===3&&(s.getContext&&typeof l>"u"?(l=c,c=void 0):(l=c,c=i,i=s,s=void 0))}else{if(g<1)throw new Error("Too few arguments provided");return g===1?(i=s,s=c=void 0):g===2&&!s.getContext&&(c=i,i=s,s=void 0),new Promise(function(d,P){try{const S=e.create(i,c);d(n(S,s,c))}catch(S){P(S)}})}try{const d=e.create(i,c);l(null,n(d,s,c))}catch(d){l(d)}}return j.create=e.create,j.toCanvas=t.bind(null,r.render),j.toDataURL=t.bind(null,r.renderToDataURL),j.toString=t.bind(null,function(n,s,i){return o.render(n,i)}),j}var xt=At();const Dt=ut(xt);class Nt{constructor(){this.database=new st,this.camera=new lt,this.usuarios=[],this.usuariosFiltrados=[],this.paginaAtual=1,this.itensPorPagina=4,this.modoVisualizacao="grid",this.usuarioEditando=null,this.init()}async init(){try{await this.database.init(),await this.database.populateInitialData(),await this.carregarUsuarios(),this.setupCameraCallbacks(),this.setupEventListeners(),this.renderizarUsuarios(),this.atualizarEstatisticas(),this.atualizarPaginacao(),console.log("Sistema inicializado com sucesso!")}catch(e){console.error("Erro ao inicializar sistema:",e),this.mostrarToast("Erro ao inicializar sistema","error")}}async carregarUsuarios(){try{this.usuarios=await this.database.getAllUsers(),this.usuariosFiltrados=[...this.usuarios]}catch(e){console.error("Erro ao carregar usuários:",e),this.mostrarToast("Erro ao carregar usuários","error")}}setupCameraCallbacks(){this.camera.onCapture(e=>{this.processarFotoCapturada(e)}),this.camera.onQRDetected(e=>{this.processarQRDetectado(e)})}processarFotoCapturada(e){const r=new FileReader;r.onload=o=>{const t=document.getElementById("filePreview");t.innerHTML=`<img src="${o.target.result}" alt="Foto capturada">`,t.classList.add("has-image");const n=document.getElementById("foto"),s=new DataTransfer;s.items.add(e),n.files=s.files,this.mostrarToast("Foto capturada com sucesso!","success")},r.readAsDataURL(e)}processarQRDetectado(e){try{const r=JSON.parse(e);r.nome&&r.email?(document.getElementById("nome").value=r.nome||"",document.getElementById("email").value=r.email||"",document.getElementById("telefone").value=r.telefone||"",document.getElementById("cargo").value=r.cargo||"",this.mostrarToast("Dados do QR Code carregados!","success")):this.mostrarToast("QR Code não contém dados de usuário válidos","warning")}catch{this.mostrarToast("QR Code inválido","error")}}setupEventListeners(){document.getElementById("userForm").addEventListener("submit",e=>{e.preventDefault(),this.adicionarUsuario()}),document.getElementById("clearForm").addEventListener("click",()=>{this.limparFormulario()}),document.getElementById("foto").addEventListener("change",e=>{this.processarArquivo(e.target.files[0])}),document.getElementById("searchInput").addEventListener("input",e=>{this.buscarUsuarios(e.target.value)}),document.getElementById("clearSearch").addEventListener("click",()=>{document.getElementById("searchInput").value="",this.buscarUsuarios("")}),document.getElementById("cargoFilter").addEventListener("change",()=>{this.aplicarFiltros()}),document.getElementById("sortBy").addEventListener("change",()=>{this.aplicarFiltros()}),document.getElementById("gridView").addEventListener("click",()=>{this.alterarModoVisualizacao("grid")}),document.getElementById("listView").addEventListener("click",()=>{this.alterarModoVisualizacao("list")}),document.getElementById("firstPage").addEventListener("click",()=>{this.irParaPagina(1)}),document.getElementById("prevPage").addEventListener("click",()=>{this.irParaPagina(this.paginaAtual-1)}),document.getElementById("nextPage").addEventListener("click",()=>{this.irParaPagina(this.paginaAtual+1)}),document.getElementById("lastPage").addEventListener("click",()=>{const e=Math.ceil(this.usuariosFiltrados.length/this.itensPorPagina);this.irParaPagina(e)}),document.getElementById("itemsPerPageSelect").addEventListener("change",e=>{this.itensPorPagina=parseInt(e.target.value),this.paginaAtual=1,this.renderizarUsuarios(),this.atualizarPaginacao()}),document.getElementById("exportData").addEventListener("click",()=>{this.exportarDados()}),this.setupModalEventListeners()}setupModalEventListeners(){document.getElementById("modalClose").addEventListener("click",()=>{this.fecharModal("confirmModal")}),document.getElementById("modalCancel").addEventListener("click",()=>{this.fecharModal("confirmModal")}),document.getElementById("editModalClose").addEventListener("click",()=>{this.fecharModal("editModal")}),document.getElementById("editModalCancel").addEventListener("click",()=>{this.fecharModal("editModal")}),document.getElementById("editModalSave").addEventListener("click",()=>{this.salvarEdicaoUsuario()}),document.getElementById("shareModalClose").addEventListener("click",()=>{this.fecharModal("shareModal")}),document.getElementById("downloadQRBtn").addEventListener("click",()=>{this.baixarQRCode()}),document.getElementById("shareQRBtn").addEventListener("click",()=>{this.compartilharQRCode()}),document.querySelectorAll(".modal").forEach(e=>{e.addEventListener("click",r=>{r.target===e&&this.fecharModal(e.id)})})}async adicionarUsuario(){try{const e=this.obterDadosFormulario();if(!this.validarFormulario(e))return;const r=await this.database.addUser(e);this.usuarios.push(r),this.aplicarFiltros(),this.limparFormulario(),this.renderizarUsuarios(),this.atualizarEstatisticas(),this.atualizarPaginacao(),this.mostrarToast("Usuário cadastrado com sucesso!","success")}catch(e){console.error("Erro ao adicionar usuário:",e),this.mostrarToast("Erro ao cadastrar usuário","error")}}obterDadosFormulario(){const e=document.getElementById("foto");let r="https://images.pexels.com/photos/1040880/pexels-photo-1040880.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop";return e.files&&e.files[0]&&(r=URL.createObjectURL(e.files[0])),{nome:document.getElementById("nome").value.trim(),email:document.getElementById("email").value.trim(),telefone:document.getElementById("telefone").value.trim(),cargo:document.getElementById("cargo").value,foto:r}}validarFormulario(e){let r=!0;document.querySelectorAll(".error-message").forEach(n=>{n.textContent=""}),(!e.nome||e.nome.length<2)&&(document.getElementById("nomeError").textContent="Nome deve ter pelo menos 2 caracteres",r=!1);const o=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;(!e.email||!o.test(e.email))&&(document.getElementById("emailError").textContent="Email inválido",r=!1),this.usuarios.some(n=>n.email===e.email&&(!this.usuarioEditando||n.id!==this.usuarioEditando.id))&&(document.getElementById("emailError").textContent="Este email já está cadastrado",r=!1);const t=/^\(\d{2}\)\s\d{4,5}-\d{4}$/;return(!e.telefone||!t.test(e.telefone))&&(document.getElementById("telefoneError").textContent="Telefone deve estar no formato (11) 99999-9999",r=!1),e.cargo||(document.getElementById("cargoError").textContent="Selecione um cargo",r=!1),r}processarArquivo(e){if(!e)return;if(!e.type.startsWith("image/")){this.mostrarToast("Por favor, selecione apenas arquivos de imagem","error");return}if(e.size>5*1024*1024){this.mostrarToast("A imagem deve ter no máximo 5MB","error");return}const r=new FileReader;r.onload=o=>{const t=document.getElementById("filePreview");t.innerHTML=`<img src="${o.target.result}" alt="Preview da foto">`,t.classList.add("has-image")},r.readAsDataURL(e)}limparFormulario(){document.getElementById("userForm").reset();const e=document.getElementById("filePreview");e.innerHTML=`
      <iconify-icon icon="mdi:camera-plus"></iconify-icon>
      <span>Clique para adicionar foto</span>
    `,e.classList.remove("has-image"),document.querySelectorAll(".error-message").forEach(r=>{r.textContent=""})}async buscarUsuarios(e){try{e.trim()?this.usuariosFiltrados=await this.database.searchUsers(e):this.usuariosFiltrados=[...this.usuarios],this.paginaAtual=1,this.renderizarUsuarios(),this.atualizarEstatisticas(),this.atualizarPaginacao(),document.getElementById("clearSearch").classList.toggle("show",e.length>0)}catch(r){console.error("Erro ao buscar usuários:",r),this.mostrarToast("Erro na busca","error")}}aplicarFiltros(){const e=document.getElementById("cargoFilter").value,r=document.getElementById("sortBy").value;let o=[...this.usuarios];e&&(o=o.filter(n=>n.cargo===e));const t=document.getElementById("searchInput").value.trim();if(t){const n=t.toLowerCase();o=o.filter(s=>s.nome.toLowerCase().includes(n)||s.email.toLowerCase().includes(n)||s.cargo.toLowerCase().includes(n)||s.telefone.includes(t))}o.sort((n,s)=>{switch(r){case"nome":return n.nome.localeCompare(s.nome);case"email":return n.email.localeCompare(s.email);case"cargo":return n.cargo.localeCompare(s.cargo);case"data":return new Date(s.dataRegistro)-new Date(n.dataRegistro);default:return 0}}),this.usuariosFiltrados=o,this.paginaAtual=1,this.renderizarUsuarios(),this.atualizarEstatisticas(),this.atualizarPaginacao()}alterarModoVisualizacao(e){this.modoVisualizacao=e,document.getElementById("gridView").classList.toggle("active",e==="grid"),document.getElementById("listView").classList.toggle("active",e==="list");const r=document.getElementById("usuariosContainer");r.className=e==="grid"?"usuarios-grid":"usuarios-list",this.renderizarUsuarios()}renderizarUsuarios(){const e=document.getElementById("usuariosContainer"),r=document.getElementById("emptyState");if(this.usuariosFiltrados.length===0){e.innerHTML="",r.style.display="block";return}r.style.display="none";const o=(this.paginaAtual-1)*this.itensPorPagina,t=o+this.itensPorPagina,n=this.usuariosFiltrados.slice(o,t);e.innerHTML=n.map((s,i)=>`
        <div class="usuario-card ${this.modoVisualizacao==="list"?"list-view":""}" style="animation-delay: ${i*.1}s">
          <img src="${s.foto}" alt="${s.nome}" onerror="this.src='https://images.pexels.com/photos/1040880/pexels-photo-1040880.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop'">
          <div class="usuario-info">
            <h3>${s.nome}</h3>
            <p><iconify-icon icon="mdi:email"></iconify-icon> ${s.email}</p>
            <p><iconify-icon icon="mdi:phone"></iconify-icon> ${s.telefone}</p>
            <span class="cargo">${s.cargo}</span>
          </div>
          <div class="usuario-actions">
            <button class="action-btn edit-btn" onclick="userSystem.editarUsuario(${s.id})">
              <iconify-icon icon="mdi:pencil"></iconify-icon> Editar
            </button>
            <button class="action-btn share-btn" onclick="userSystem.compartilharUsuario(${s.id})">
              <iconify-icon icon="mdi:share"></iconify-icon> Compartilhar
            </button>
            <button class="action-btn remove-btn" onclick="userSystem.confirmarRemocao(${s.id})">
              <iconify-icon icon="mdi:delete"></iconify-icon> Remover
            </button>
          </div>
        </div>
      `).join("")}atualizarEstatisticas(){const e=this.usuarios.length,r=new Date().toDateString(),o=this.usuarios.filter(n=>new Date(n.dataRegistro).toDateString()===r).length,t=this.usuariosFiltrados.length;this.animarNumero("totalUsers",e),this.animarNumero("newUsersToday",o),this.animarNumero("filteredUsers",t)}animarNumero(e,r){const o=document.getElementById(e),t=parseInt(o.textContent)||0;if(t===r)return;const s=(r-t)/(500/16);let i=t;const c=()=>{i+=s,s>0&&i>=r||s<0&&i<=r?o.textContent=r:(o.textContent=Math.round(i),requestAnimationFrame(c))};c()}atualizarPaginacao(){const e=Math.ceil(this.usuariosFiltrados.length/this.itensPorPagina);document.getElementById("firstPage").disabled=this.paginaAtual===1,document.getElementById("prevPage").disabled=this.paginaAtual===1,document.getElementById("nextPage").disabled=this.paginaAtual===e,document.getElementById("lastPage").disabled=this.paginaAtual===e;const r=document.getElementById("pageNumbers");r.innerHTML="";const o=5;let t=Math.max(1,this.paginaAtual-Math.floor(o/2)),n=Math.min(e,t+o-1);n-t<o-1&&(t=Math.max(1,n-o+1));for(let c=t;c<=n;c++){const l=document.createElement("button");l.textContent=c,l.classList.toggle("active",c===this.paginaAtual),l.addEventListener("click",()=>this.irParaPagina(c)),r.appendChild(l)}const s=(this.paginaAtual-1)*this.itensPorPagina+1,i=Math.min(this.paginaAtual*this.itensPorPagina,this.usuariosFiltrados.length);document.getElementById("pageInfo").textContent=`Página ${this.paginaAtual} de ${e} (${s}-${i} de ${this.usuariosFiltrados.length})`}irParaPagina(e){const r=Math.ceil(this.usuariosFiltrados.length/this.itensPorPagina);e<1||e>r||(this.paginaAtual=e,this.renderizarUsuarios(),this.atualizarPaginacao(),document.querySelector(".users-section").scrollIntoView({behavior:"smooth",block:"start"}))}async editarUsuario(e){try{const r=this.usuarios.find(o=>o.id===e);if(!r)return;this.usuarioEditando=r,document.getElementById("editUserId").value=r.id,document.getElementById("editNome").value=r.nome,document.getElementById("editEmail").value=r.email,document.getElementById("editTelefone").value=r.telefone,document.getElementById("editCargo").value=r.cargo,this.abrirModal("editModal")}catch(r){console.error("Erro ao editar usuário:",r),this.mostrarToast("Erro ao carregar dados do usuário","error")}}async salvarEdicaoUsuario(){try{const e=parseInt(document.getElementById("editUserId").value),r={nome:document.getElementById("editNome").value.trim(),email:document.getElementById("editEmail").value.trim(),telefone:document.getElementById("editTelefone").value.trim(),cargo:document.getElementById("editCargo").value};await this.database.updateUser(e,r);const o=this.usuarios.findIndex(t=>t.id===e);o!==-1&&Object.assign(this.usuarios[o],r),this.aplicarFiltros(),this.renderizarUsuarios(),this.fecharModal("editModal"),this.usuarioEditando=null,this.mostrarToast("Usuário atualizado com sucesso!","success")}catch(e){console.error("Erro ao salvar usuário:",e),this.mostrarToast("Erro ao salvar alterações","error")}}confirmarRemocao(e){const r=this.usuarios.find(t=>t.id===e);if(!r)return;document.getElementById("modalTitle").textContent="Confirmar Remoção",document.getElementById("modalMessage").textContent=`Tem certeza que deseja remover o usuário "${r.nome}"? Esta ação não pode ser desfeita.`;const o=document.getElementById("modalConfirm");o.onclick=()=>this.removerUsuario(e),this.abrirModal("confirmModal")}async removerUsuario(e){try{await this.database.deleteUser(e),this.usuarios=this.usuarios.filter(r=>r.id!==e),this.aplicarFiltros(),this.renderizarUsuarios(),this.atualizarEstatisticas(),this.atualizarPaginacao(),this.fecharModal("confirmModal"),this.mostrarToast("Usuário removido com sucesso!","success")}catch(r){console.error("Erro ao remover usuário:",r),this.mostrarToast("Erro ao remover usuário","error")}}async compartilharUsuario(e){try{const r=this.usuarios.find(n=>n.id===e);if(!r)return;document.getElementById("shareUserName").textContent=r.nome,document.getElementById("shareUserDetails").textContent=`${r.cargo} • ${r.email}`;const o={nome:r.nome,email:r.email,telefone:r.telefone,cargo:r.cargo},t=document.getElementById("qrCodeCanvas");await Dt.toCanvas(t,JSON.stringify(o),{width:200,margin:2,color:{dark:"#000000",light:"#FFFFFF"}}),this.abrirModal("shareModal")}catch(r){console.error("Erro ao gerar QR code:",r),this.mostrarToast("Erro ao gerar QR code","error")}}baixarQRCode(){const e=document.getElementById("qrCodeCanvas"),r=document.createElement("a");r.download="qr-code-usuario.png",r.href=e.toDataURL(),r.click(),this.mostrarToast("QR Code baixado!","success")}async compartilharQRCode(){try{document.getElementById("qrCodeCanvas").toBlob(async r=>{if(navigator.share){const o=new File([r],"qr-code-usuario.png",{type:"image/png"});await navigator.share({title:"QR Code do Usuário",text:"Compartilhando dados do usuário via QR Code",files:[o]})}else{const o=new ClipboardItem({"image/png":r});await navigator.clipboard.write([o]),this.mostrarToast("QR Code copiado para a área de transferência!","success")}})}catch(e){console.error("Erro ao compartilhar:",e),this.mostrarToast("Erro ao compartilhar QR Code","error")}}exportarDados(){try{const e=this.usuariosFiltrados.map(n=>({Nome:n.nome,Email:n.email,Telefone:n.telefone,Cargo:n.cargo,"Data de Registro":new Date(n.dataRegistro).toLocaleDateString("pt-BR")})),r=this.converterParaCSV(e),o=new Blob([r],{type:"text/csv;charset=utf-8;"}),t=document.createElement("a");t.href=URL.createObjectURL(o),t.download=`usuarios_${new Date().toISOString().split("T")[0]}.csv`,t.click(),this.mostrarToast("Dados exportados com sucesso!","success")}catch(e){console.error("Erro ao exportar dados:",e),this.mostrarToast("Erro ao exportar dados","error")}}converterParaCSV(e){if(e.length===0)return"";const r=Object.keys(e[0]);return"\uFEFF"+[r.join(","),...e.map(t=>r.map(n=>`"${t[n]||""}"`).join(","))].join(`
`)}abrirModal(e){const r=document.getElementById(e);r.classList.add("show");const o=r.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');o.length>0&&o[0].focus()}fecharModal(e){document.getElementById(e).classList.remove("show")}mostrarToast(e,r="info"){const o=document.getElementById("toastContainer"),t=document.createElement("div");t.className=`toast ${r}`;const n={success:"mdi:check-circle",error:"mdi:alert-circle",warning:"mdi:alert",info:"mdi:information"};t.innerHTML=`
      <iconify-icon icon="${n[r]||n.info}"></iconify-icon>
      <div class="toast-content">
        <div class="toast-title">${e}</div>
      </div>
      <button class="toast-close">
        <iconify-icon icon="mdi:close"></iconify-icon>
      </button>
    `,o.appendChild(t),setTimeout(()=>{t.style.opacity="0",t.style.transform="translateX(100%)",setTimeout(()=>{o.contains(t)&&o.removeChild(t)},300)},5e3),t.querySelector(".toast-close").addEventListener("click",()=>{t.style.opacity="0",t.style.transform="translateX(100%)",setTimeout(()=>{o.contains(t)&&o.removeChild(t)},300)})}}document.addEventListener("DOMContentLoaded",()=>{window.userSystem=new Nt});var Ye;(Ye=document.getElementById("telefone"))==null||Ye.addEventListener("input",function(a){let e=a.target.value.replace(/\D/g,"");e.length<=11&&(e=e.replace(/(\d{2})(\d{4,5})(\d{4})/,"($1) $2-$3"),a.target.value=e)});var We;(We=document.getElementById("editTelefone"))==null||We.addEventListener("input",function(a){let e=a.target.value.replace(/\D/g,"");e.length<=11&&(e=e.replace(/(\d{2})(\d{4,5})(\d{4})/,"($1) $2-$3"),a.target.value=e)});export{ct as _};
